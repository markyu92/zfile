System.register(["./index-legacy-e574cec8.js","./loading-legacy-2688a411.js","./el-table-column-plus-legacy-a2eac651.js","./button-legacy-f53896dd.js","./tag-legacy-5e0686c8.js","./select-legacy-8b64fa67.js","./scrollbar-legacy-0817fabf.js","./popper-legacy-ef8fd66b.js","./input-legacy-bc871eba.js","./admin-form-header-legacy-5b0f136c.js","./alert-legacy-3cfbcde8.js","./tooltip-legacy-518b8698.js","./switch-legacy-a4b2d82c.js","./arrow-left-legacy-eb9efd7f.js","./admin-storage-legacy-6381f83d.js","./readme-editor-dialog-legacy-872af25f.js","./base-legacy-173045dc.js","./sortable.esm-legacy-9b05e4a7.js","./request-legacy-61b983ae.js","./index-legacy-47a1148a.js","./route-block-legacy-509c7347.js","./_plugin-vue_export-helper-legacy-8fcf0e06.js","./FolderIcon-legacy-f2907149.js","./DocumentTextIcon-legacy-2e2f9f9b.js","./ArrowUpIcon-legacy-896909a5.js","./TrashIcon-legacy-3360f913.js","./PlusIcon-legacy-2c71b691.js","./CheckBadgeIcon-legacy-a01a5b9d.js","./index-legacy-1ae34dc2.js","./directive-legacy-64af483a.js","./index-legacy-69b9ad2b.js","./index-legacy-ea3d196e.js","./index-legacy-c317e588.js","./_initCloneObject-legacy-b35b9836.js","./index-legacy-d493f4b0.js","./debounce-legacy-321ba92e.js","./index-legacy-693c88b9.js","./index-legacy-183af9d3.js","./strings-legacy-b2510e8b.js","./scroll-legacy-68db505b.js","./vnode-legacy-bdad68af.js","./validator-legacy-a3ca6880.js","./dialog-legacy-5ef05c71.js","./index-legacy-b5baaeae.js","./overlay-legacy-6ebb9437.js","./refs-legacy-1635e56d.js"],(function(e,l){"use strict";var n,a,t,i,o,c,r,u,d,s,f,m,p,g,y,v,b,x,h,j,w,_,k,V,I,C,U,T,z,E,D,$,M,q,R,A,B,F,G,O,S,N,P,W,Y,H,Q,X,Z,J,K,L;return{setters:[function(e){n=e.r,a=e.a3,t=e.Y,i=e._,o=e.o,c=e.ak,r=e.b,u=e.g,d=e.x,s=e.f,f=e.e,m=e.w,p=e.k,g=e.y,y=e.a0,v=e.l,b=e.$,x=e.aj,h=e.a2,j=e.F},null,function(e){w=e._,_=e.a},function(e){k=e.E},null,function(e){V=e.E,I=e.a},null,null,null,function(e){C=e._},function(e){U=e.E},null,function(e){T=e.E},function(e){z=e._},function(e){E=e.r,D=e.t,$=e.j,M=e.u},function(e){q=e.default},function(e){R=e.i},function(e){A=e.S},function(e){B=e.E,F=e.b},function(e){G=e.E},function(e){O=e.b},function(e){S=e._},function(e){N=e.r,P=e.a,W=e.b},function(e){Y=e.r},function(e){H=e.r,Q=e.a},function(e){X=e.r},function(e){Z=e.r},function(e){J=e.r},function(e){K=e.E},function(e){L=e.v},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent=".zfile-admin-readme-body[data-v-c33744c4] .el-form-sub-title{max-width:100%}.zfile-admin-readme-body .rules-tips[data-v-c33744c4]{padding:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:700}.zfile-admin-readme-body .rules-tips-link[data-v-c33744c4]{margin-top:.5rem}.zfile-admin-readme-body .rules-tips-link[data-v-c33744c4]>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.25rem * var(--tw-space-x-reverse));margin-left:calc(1.25rem * calc(1 - var(--tw-space-x-reverse)))}.zfile-admin-readme-body .rules-tips-link svg[data-v-c33744c4]{height:1rem;line-height:1.25rem;vertical-align:text-bottom}.el-table[data-v-c33744c4] .cell{padding-right:.5rem;padding-left:0}.el-table[data-v-c33744c4] .el-table__row{height:4rem}.el-table[data-v-c33744c4] .el-table__row:last-child .el-table__cell{border-bottom-width:0px}.el-table[data-v-c33744c4] .el-table__inner-wrapper:before{content:none}.add-more-btn[data-v-c33744c4]{margin-bottom:.5rem;width:100%;border-style:dashed}@media not all and (min-width: 768px){.add-more-btn[data-v-c33744c4]{margin-top:.5rem}}.save-btn[data-v-c33744c4]{display:-webkit-box;display:flex}.save-btn .el-button[data-v-c33744c4]{margin-left:auto}\n",document.head.appendChild(l);var ee=n([]),le=n(!1);function ne(e,l){var n=l.params.storageId,a=function(){var e=document.querySelectorAll(".el-table__body-wrapper table > tbody")[0];e&&A.create(e,{filter:".el-button",onEnd:function(e){if(e.oldIndex!==e.newIndex){var l=ee.value.splice(e.oldIndex,1)[0];ee.value.splice(e.newIndex,0,l)}}})},t=function(){ee.value.push({description:"表达式 - "+(ee.value.length+1),expression:"",readmeText:"",displayMode:"top",storageId:n})};return{loading:le,loadData:function(){E(n).then((function(e){ee.value=e.data,0===ee.value.length&&t(),a()}))},list:ee,addItem:t,deleteItem:function(e){ee.value.splice(e,1)},moveUp:function(e){if(0!==e){var l=ee.value[e];ee.value.splice(e,1),ee.value.splice(e-1,0,l)}},moveDown:function(e){if(e!==ee.value.length-1){var l=ee.value[e];ee.value.splice(e,1),ee.value.splice(e+1,0,l)}},saveData:function(){if(!ee.value.find((function(e){if(R(e.description)||R(e.expression)||R(e.readmeText))return B.warning("请检查数据填写是否完整"),!0}))){le.value=!0;for(var l=0;l<ee.value.length;l++)ee.value[l].id=l+1;D(n,ee.value).then((function(){G.confirm("保存成功, 是否返回存储源列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(l){"confirm"===l&&e.push("/admin/storage-list")}})})).finally((function(){le.value=!1}))}}}}var ae={class:"zfile-admin-readme-body"},te={class:"flex justify-between justify-items-center"},ie={class:"flex justify-items-center cursor-pointer my-auto"},oe={class:"rules-tips-link"},ce={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},re={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},ue={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},de={class:"save-btn"},se={__name:"[storageId]",props:{storageId:{type:Number,required:!1}},setup:function(e){var l=a(),E=t(),D=i();o((function(){G(),pe()}));var R=ne(D,E),A=R.loading,G=R.loadData,O=R.list,S=R.addItem,ee=R.deleteItem,le=R.moveUp,se=R.moveDown,fe=R.saveData,me=n(),pe=function(){$(E.params.storageId).then((function(e){e.data.type=e.data.type.key,me.value=e.data}))},ge=function(){M(E.params.storageId,me.value.compatibilityReadme).then((function(e){B.success("保存成功")}))},ye=n({}),ve=n(!1);return function(e,n){var a=z,t=c("router-link"),i=T,o=K,E=U,D=C,$=w,M=F,R=V,B=I,G=k,ne=_,pe=L;return r(),u(j,null,[d("div",ae,[s(me)?(r(),f(D,{key:0},{title:m((function(){return[d("div",te,[d("div",ie,[p(t,{to:"/admin/storage-list"},{default:m((function(){return[p(a,{class:"my-auto h-full mr-2"})]})),_:1}),d("span",null,"目录文档（"+g(s(me).name)+"）",1)]),p(o,{placement:"top",content:"启用后下发的规则设置会失效，仅会为读取目录下的 readme.md 文件来渲染文档, 且固定在底部显示."},{default:m((function(){return[d("div",null,[n[3]||(n[3]=d("span",{class:"mr-4 text-sm text-gray-500"},"兼容为读取 readme.md",-1)),p(i,{onChange:ge,"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:s(me).compatibilityReadme,"onUpdate:modelValue":n[0]||(n[0]=function(e){return s(me).compatibilityReadme=e})},null,8,["modelValue"])])]})),_:1})])]})),subTitle:m((function(){return[p(E,{closable:!1,type:"info"},{default:m((function(){return[n[7]||(n[7]=d("div",{class:"rules-tips"},"Glob 表达式规则：",-1)),n[8]||(n[8]=d("div",{class:"rules-tips"},[d("b",null,"/"),y(": 根目录, 如 "),d("span",{class:"code select-all"},"/"),y(" 表示根路径下会加载此文档显示.")],-1)),n[9]||(n[9]=d("div",{class:"rules-tips"},[d("b",null,"*"),y("：单级路径通配符，如表达式 "),d("span",{class:"code select-all"},"/*"),y(" 表示根路径下的直接子文件夹会加载此文档显示.")],-1)),n[10]||(n[10]=d("div",{class:"rules-tips"},[d("b",null,"**"),y("：多级路径通配符，如表达式 "),d("span",{class:"code select-all"},"/music/**"),y(" 表示 /music 文件夹及以下所有文件夹都会加载此文档.")],-1)),n[11]||(n[11]=d("div",{class:"rules-tips"},"注：系统匹配到第一个符合的规则就会取文档进行显示，所以请调整好规则顺序，下方规则可进行拖拽排序。",-1)),d("div",oe,[d("a",ce,[p(s(N),{class:"inline mr-1"}),n[4]||(n[4]=d("span",null,"参考文章 (Wikipedia)",-1))]),d("a",re,[p(s(N),{class:"inline mr-1"}),n[5]||(n[5]=y("参考文章 (阮一峰)"))]),d("a",ue,[p(s(N),{class:"inline mr-1"}),n[6]||(n[6]=y("参考文章 (Github)"))])])]})),_:1,__:[7,8,9,10,11]})]})),_:1})):v("",!0),b((r(),f(ne,{size:s(l).adminTable.size,"row-key":"id",data:s(O)},{default:m((function(){return[s(x)?(r(),f($,{key:0,label:"ID",prop:"id"})):v("",!0),p($,{label:"描述",prop:"description"},{default:m((function(e){return[p(M,{"prefix-icon":s(P),placeholder:"请输入表达式描述",modelValue:e.row.description,"onUpdate:modelValue":function(l){return e.row.description=l}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]})),_:1}),p($,{label:"表达式",prop:"expression"},{default:m((function(e){return[p(M,{"prefix-icon":s(W),placeholder:"请输入表达式",modelValue:e.row.expression,"onUpdate:modelValue":function(l){return e.row.expression=l},modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]})),_:1}),p($,{label:"目录文档",prop:"readmeText"},{default:m((function(e){return[p(M,{onClick:function(l){return n=e.row,ve.value=!0,void(ye.value=n);var n},readonly:"","prefix-icon":s(Y),placeholder:"请点击编辑文档",modelValue:e.row.readmeText,"onUpdate:modelValue":function(l){return e.row.readmeText=l}},null,8,["onClick","prefix-icon","modelValue","onUpdate:modelValue"])]})),_:1}),p($,{label:"显示位置",width:"120",prop:"displayMode"},{default:m((function(e){return[p(B,{modelValue:e.row.displayMode,"onUpdate:modelValue":function(l){return e.row.displayMode=l}},{default:m((function(){return[p(R,{label:"顶部显示",value:"top"}),p(R,{label:"底部显示",value:"bottom"}),p(R,{label:"弹窗显示",value:"dialog"})]})),_:2},1032,["modelValue","onUpdate:modelValue"])]})),_:1}),p($,{align:"center",label:"操作",width:"60px"},{default:m((function(e){return[s(x)&&0!==e.$index?(r(),f(G,{key:0,type:"primary",onClick:function(l){return s(le)(e.$index)},icon:s(H)},null,8,["onClick","icon"])):v("",!0),s(x)&&e.$index!==s(O).length-1?(r(),f(G,{key:1,type:"primary",onClick:function(l){return s(se)(e.$index)},icon:s(Q)},null,8,["onClick","icon"])):v("",!0),p(G,{type:"danger",onClick:function(l){return s(ee)(e.$index)},icon:s(X)},null,8,["onClick","icon"])]})),_:1})]})),_:1},8,["size","data"])),[[pe,s(A)]]),p(G,{class:"add-more-btn",size:"default",icon:s(Z),onClick:s(S)},{default:m((function(){return n[12]||(n[12]=[y("添加更多")])})),_:1,__:[12]},8,["icon","onClick"]),d("div",de,[p(G,{type:"primary",size:"default",icon:s(J),onClick:s(fe)},{default:m((function(){return n[13]||(n[13]=[y("保存设置")])})),_:1,__:[13]},8,["icon","onClick"])])]),s(ve)?(r(),f(q,{key:0,modelValue:s(ye).readmeText,"onUpdate:modelValue":n[1]||(n[1]=function(e){return s(ye).readmeText=e}),visible:s(ve),"onUpdate:visible":n[2]||(n[2]=function(e){return h(ve)?ve.value=e:ve=e})},null,8,["modelValue","visible"])):v("",!0)],64)}}};"function"==typeof O&&O(se),e("default",S(se,[["__scopeId","data-v-c33744c4"]]))}}}));
