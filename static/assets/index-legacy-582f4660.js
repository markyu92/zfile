System.register(["./index-legacy-e574cec8.js","./loading-legacy-2688a411.js","./form-item-legacy-de8da7e8.js","./tooltip-legacy-518b8698.js","./popper-legacy-ef8fd66b.js","./image-viewer-legacy-2d4450b2.js","./button-legacy-f53896dd.js","./radio-legacy-bf353ae9.js","./input-legacy-bc871eba.js","./switch-legacy-a4b2d82c.js","./admin-form-header-legacy-5b0f136c.js","./vue3-clipboard.esm-legacy-e37b8e98.js","./useAdminSetting-legacy-246910c5.js","./request-legacy-61b983ae.js","./route-block-legacy-509c7347.js","./ClipboardDocumentIcon-legacy-d8306660.js","./index-legacy-47a1148a.js","./index-legacy-1ae34dc2.js","./directive-legacy-64af483a.js","./index-legacy-c317e588.js","./debounce-legacy-321ba92e.js","./scroll-legacy-68db505b.js","./_initCloneObject-legacy-b35b9836.js","./validator-legacy-a3ca6880.js","./index-legacy-b5baaeae.js","./vnode-legacy-bdad68af.js"],(function(e,n){"use strict";var t,l,o,i,u,a,c,r,f,s,d,m,g,y,_,p,v,V,b,j,h,w,k,x,C,S,F,T,E,U,P,A;return{setters:[function(e){t=e.a3,l=e.r,o=e.f,i=e.$,u=e.b,a=e.e,c=e.w,r=e.k,f=e.x,s=e.a0,d=e.y,m=e.g,g=e.l},null,null,null,null,function(e){y=e.E},function(e){_=e.E},function(e){p=e.E,v=e.a},function(e){V=e.E,b=e.a},function(e){j=e.E},function(e){h=e._},function(e){w=e.t},function(e){k=e.u,x=e.a},function(e){C=e.f,S=e.E,F=e.b},function(e){T=e.b},function(e){E=e.r},function(e){U=e.E},function(e){P=e.E},function(e){A=e.v},null,null,null,null,null,null,null],execute:function(){var n=function(e){return C({url:"/admin/2fa/verify",method:"post",data:e})},L={class:"el-form-item-tips"},z={class:"text-blue-400"},I={key:0,class:"w-full"},B={key:1},M={key:2,class:"el-form-item-tips"},q=e("default",{__name:"index",setup:function(e){var T=t(),q=k(x),R=q.siteSetting,D=q.siteSettingReload,G=q.saveData,H=q.saveLoading,O=l({}),Q=function(){C({url:"/admin/2fa/setup",method:"get"}).then((function(e){O.value=e.data}))},N=function(){n(O.value).then((function(e){S.success("绑定成功"),D()}))},W=function(){U.prompt("请输入双因素认证 APP 中的验证码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!!e},inputErrorMessage:"验证码不能为空."}).then((function(e){var t=e.value,l={secret:R.value.loginVerifySecret,code:t};n(l).then((function(){S.success("验证成功")}))}))},Y=function(){w(O.value.secret).then((function(){S.success("复制成功")}))},Z=function(){R.value.loginVerifySecret="",Q()},$=function(){U.confirm("是否确认取消绑定，确认后将关闭双因素认证。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(e){"confirm"===e&&(R.value.loginVerifySecret="",R.value.adminTwoFactorVerify=!1)}})},J=function(){!1===R.value.adminTwoFactorVerify&&(R.value.loginVerifySecret="",G()),R.value.adminTwoFactorVerify&&!R.value.loginVerifySecret&&Q()},K=l(window.location.origin);return function(e,n){var t=h,l=j,w=V,k=F,x=p,C=v,S=_,U=y,q=P,D=b,X=A;return o(R)?i((u(),a(D,{key:0,model:o(R),"label-width":o(T).adminForm.labelWidth,"label-position":o(T).adminForm.labelPosition,size:o(T).adminForm.size,"scroll-to-error":"","status-icon":"",class:"z-admin-form"},{default:c((function(){return[r(t,{title:"安全设置","sub-title":"此处设置可保护您的站点安全"}),r(w,{label:"是否显示登录入口"},{default:c((function(){return[r(l,{modelValue:o(R).showLogin,"onUpdate:modelValue":n[0]||(n[0]=function(e){return o(R).showLogin=e}),onChange:o(G)},null,8,["modelValue","onChange"]),f("div",L,[n[7]||(n[7]=s(" 启用后，会在首页上方工具栏显示后台登录入口，请根据自身情况选择是否启用。(这里只是控制是否显示，直接访问登录页 URL: ")),f("span",z,d(o(K))+"/login",1),n[8]||(n[8]=s(" 也能访问) "))])]})),_:1}),r(w,{label:"匿名用户首页显示"},{default:c((function(){return[r(k,{type:"textarea",rows:8,modelValue:o(R).guestIndexHtml,"onUpdate:modelValue":n[1]||(n[1]=function(e){return o(R).guestIndexHtml=e}),onChange:o(G)},null,8,["modelValue","onChange"]),n[9]||(n[9]=f("div",{class:"el-form-item-tips"},[s(" 可填写 html 代码，用于强制匿名用户访问首页时显示的内容，留空则显示默认首页内容。"),f("br"),s(" 如强制跳转到登录页，可填写 "),f("code",{class:"code select-all"},"<script>location.href = '/login';<\/script>")],-1))]})),_:1,__:[9]}),r(w,{label:"登录日志模式"},{default:c((function(){return[r(C,{modelValue:o(R).loginLogMode,"onUpdate:modelValue":n[2]||(n[2]=function(e){return o(R).loginLogMode=e}),onChange:o(G)},{default:c((function(){return[r(x,{value:"off"},{default:c((function(){return n[10]||(n[10]=[s("关闭")])})),_:1,__:[10]}),r(x,{value:"all"},{default:c((function(){return n[11]||(n[11]=[s("全部记录")])})),_:1,__:[11]}),r(x,{value:"ignoreSuccessPwd"},{default:c((function(){return n[12]||(n[12]=[s("不记录成功密码")])})),_:1,__:[12]}),r(x,{value:"ignoreAllPwd"},{default:c((function(){return n[13]||(n[13]=[s("不记录密码")])})),_:1,__:[13]})]})),_:1},8,["modelValue","onChange"]),n[14]||(n[14]=f("div",{class:"el-form-item-tips"}," 启用图片验证码可以防止批量恶意登录，但将密码设置为高强度才是最有效的防止恶意登录的方法。 ",-1))]})),_:1,__:[14]}),r(w,{label:"是否启用图片验证码"},{default:c((function(){return[r(l,{modelValue:o(R).loginImgVerify,"onUpdate:modelValue":n[3]||(n[3]=function(e){return o(R).loginImgVerify=e}),onChange:o(G)},null,8,["modelValue","onChange"]),n[15]||(n[15]=f("div",{class:"el-form-item-tips"}," 启用图片验证码可以防止批量恶意登录，但将密码设置为高强度才是最有效的防止恶意登录的方法。 ",-1))]})),_:1,__:[15]}),r(w,{label:"是否启用管理员双因素认证"},{default:c((function(){return[r(l,{modelValue:o(R).adminTwoFactorVerify,"onUpdate:modelValue":n[4]||(n[4]=function(e){return o(R).adminTwoFactorVerify=e}),onChange:J},null,8,["modelValue"]),n[16]||(n[16]=f("div",{class:"el-form-item-tips"},[s(" 双因素认证可完美保护登录认证，可使用任意支持 2FA 认证的软件，如 "),f("b",null,"Google 身份验证器"),s("、"),f("b",null,"Microsoft Authenticator"),s(" 等软件.（仅适用于管理员登录，不影响其他用户登录。） ")],-1))]})),_:1,__:[16]}),o(R).adminTwoFactorVerify?(u(),a(w,{key:0,label:"双因素认证密钥"},{default:c((function(){var e;return[o(R).loginVerifySecret?(u(),m("div",I,[r(S,{type:"primary",onClick:Z},{default:c((function(){return n[17]||(n[17]=[s("重新绑定")])})),_:1,__:[17]}),r(S,{type:"primary",onClick:$},{default:c((function(){return n[18]||(n[18]=[s("取消绑定")])})),_:1,__:[18]}),r(S,{type:"primary",onClick:W},{default:c((function(){return n[19]||(n[19]=[s("验证绑定")])})),_:1,__:[19]})])):(u(),m("div",B,[r(U,{onClick:Q,src:null===(e=o(O))||void 0===e?void 0:e.qrcode},null,8,["src"]),r(k,{readonly:"",modelValue:o(O).secret,"onUpdate:modelValue":n[5]||(n[5]=function(e){return o(O).secret=e})},{append:c((function(){return[r(q,{class:"item",effect:"dark",content:"复制",placement:"bottom"},{default:c((function(){return[r(S,{onClick:Y,icon:o(E)},null,8,["icon"])]})),_:1})]})),_:1},8,["modelValue"])])),o(R).loginVerifySecret?g("",!0):(u(),m("div",M," 可扫描上方二维码或复制下方密钥到支持双因素认证的软件中添加。 "))]})),_:1})):g("",!0),o(R).adminTwoFactorVerify&&!o(R).loginVerifySecret?(u(),a(w,{key:1,label:"双因素认证验证码"},{default:c((function(){return[r(k,{modelValue:o(O).code,"onUpdate:modelValue":n[6]||(n[6]=function(e){return o(O).code=e})},null,8,["modelValue"]),r(S,{class:"mt-2",onClick:N,type:"primary"},{default:c((function(){return n[20]||(n[20]=[s("验证并绑定")])})),_:1,__:[20]}),n[21]||(n[21]=f("div",{class:"el-form-item-tips"}," 请绑定双因素认证软件后，输入显示的验证码进行绑定 ",-1))]})),_:1,__:[21]})):g("",!0)]})),_:1},8,["model","label-width","label-position","size"])),[[X,o(H)]]):g("",!0)}}});"function"==typeof T&&T(q)}}}));
