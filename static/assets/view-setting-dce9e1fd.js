import{a3 as D,B as J,a8 as f,r as W,$ as b,f as l,b as S,g as $,k as t,w as i,e as g,a0 as n,x as u,l as k,a2 as B,a9 as N,aa as z}from"./index-008199ed.js";/* empty css                */import{E as Z}from"./button-30635c71.js";import{E as H,a as q}from"./tab-pane-33044fe9.js";import{E as G,a as K}from"./input-73d413ba.js";import"./tooltip-4ed993c7.js";/* empty css               */import{E as Q}from"./alert-f7baa744.js";/* empty css                  */import{E as X}from"./input-number-89d86f4f.js";import{E as Y}from"./switch-6e3117dc.js";import{E as c,a as h}from"./radio-7917ad9b.js";import{u as ee,e as le}from"./useAdminSetting-8228330a.js";import{b as C}from"./route-block-83d24a4e.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import{r as E}from"./ArrowPathIcon-f6c0972c.js";import{r as te}from"./CheckBadgeIcon-af1628c6.js";import{E as ie}from"./index-60380bfa.js";import{b as ae}from"./request-7014ab81.js";import{v as de}from"./directive-20abcd4b.js";import"./index-4ea0a277.js";import"./strings-535b4609.js";import"./vnode-5e2fd68e.js";import"./_initCloneObject-ffec0ace.js";import"./index-3c7e69e5.js";import"./validator-38288ad7.js";const ue={class:"zfile-admin-view-setting-wrapper"},me={class:"pt-4"},M={__name:"view-setting",setup(ne){let s=D();const{siteSetting:o,siteSettingLoading:A,saveData:P,saveLoading:v}=ee(le);J(()=>o.value,(r,e)=>{e===null&&(o.value.customVideoSuffix||(o.value.customVideoSuffix=f.fileTypeMap.video.join(",")),o.value.customImageSuffix||(o.value.customImageSuffix=f.fileTypeMap.image.join(",")),o.value.customAudioSuffix||(o.value.customAudioSuffix=f.fileTypeMap.audio.join(",")),o.value.customTextSuffix||(o.value.customTextSuffix=f.fileTypeMap.text.join(",")),o.value.customOfficeSuffix||(o.value.customOfficeSuffix=f.fileTypeMap.office.join(",")))});const U=W("a"),I=N(()=>new Promise((r,e)=>{(async function(){try{const m=await z(()=>import("./base-editor-6e959fa2.js").then(V=>V.b),["assets/base-editor-6e959fa2.js","assets/index-008199ed.js","assets/index-f80c9658.css","assets/vue.runtime.esm-bundler-f20384e6.js"]);await z(()=>Promise.resolve({}),["assets/base-editor-28237bf2.css"]),z(()=>Promise.resolve({}),["assets/github-716cd734.css"]);const F=await z(()=>import("./github-35fb9fc1.js").then(V=>V.g),["assets/github-35fb9fc1.js","assets/index-008199ed.js","assets/index-f80c9658.css"]),d=await z(()=>import("./index-e090dc45.js"),["assets/index-e090dc45.js","assets/index-008199ed.js","assets/index-f80c9658.css","assets/core-d5a5cfb4.js"]);m.use(F,{Hljs:d.HighlightJS}),r(m)}catch(m){e(m)}})()})),x=r=>{r==="video"?o.value.customVideoSuffix=f.fileTypeMap.video.join(","):r==="image"?o.value.customImageSuffix=f.fileTypeMap.image.join(","):r==="audio"?o.value.customAudioSuffix=f.fileTypeMap.audio.join(","):r==="text"?o.value.customTextSuffix=f.fileTypeMap.text.join(","):r==="office"&&(o.value.customOfficeSuffix=f.fileTypeMap.office.join(","))};return(r,e)=>{const m=c,F=h,d=G,V=Y,T=X,y=K,w=H,j=Q,O=ie,p=ae,L=q,R=Z,_=de;return b((S(),$("div",ue,[t(L,{modelValue:l(U),"onUpdate:modelValue":e[32]||(e[32]=a=>B(U)?U.value=a:null)},{default:i(()=>[t(w,{label:"使用习惯",name:"a"},{default:i(()=>[l(o)?b((S(),g(y,{key:0,model:l(o),"label-width":l(s).adminForm.labelWidth,"label-position":l(s).adminForm.labelPosition,size:l(s).adminForm.size,"status-icon":"",class:"z-admin-form","element-loading-text":"保存中..."},{default:i(()=>[t(d,{label:"页面布局"},{default:i(()=>[t(F,{modelValue:l(o).layout,"onUpdate:modelValue":e[0]||(e[0]=a=>l(o).layout=a)},{default:i(()=>[t(m,{value:"full"},{default:i(()=>e[33]||(e[33]=[n("全屏")])),_:1,__:[33]}),t(m,{value:"center"},{default:i(()=>e[34]||(e[34]=[n("居中")])),_:1,__:[34]}),t(m,{value:"card"},{default:i(()=>e[35]||(e[35]=[n("卡片")])),_:1,__:[35]})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"移动端页面布局"},{default:i(()=>[t(F,{modelValue:l(o).mobileLayout,"onUpdate:modelValue":e[1]||(e[1]=a=>l(o).mobileLayout=a)},{default:i(()=>[t(m,{value:"full"},{default:i(()=>e[36]||(e[36]=[n("全屏")])),_:1,__:[36]}),t(m,{value:"center"},{default:i(()=>e[37]||(e[37]=[n("居中")])),_:1,__:[37]}),t(m,{value:"card"},{default:i(()=>e[38]||(e[38]=[n("卡片")])),_:1,__:[38]})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"根目录显示所有存储源"},{default:i(()=>[t(V,{modelValue:l(o).rootShowStorage,"onUpdate:modelValue":e[2]||(e[2]=a=>l(o).rootShowStorage=a)},null,8,["modelValue"]),e[39]||(e[39]=u("div",{class:"el-form-item-tips"}," 勾选则根目录显示所有存储源列表, 反之会自动显示第一个存储源的内容. ",-1))]),_:1,__:[39]}),t(d,{label:"输入文件夹密码时默认勾选保存密码"},{default:i(()=>[t(V,{modelValue:l(o).defaultSavePwd,"onUpdate:modelValue":e[3]||(e[3]=a=>l(o).defaultSavePwd=a)},null,8,["modelValue"])]),_:1}),t(d,{label:"文件操作习惯"},{default:i(()=>[t(m,{modelValue:l(o).fileClickMode,"onUpdate:modelValue":e[4]||(e[4]=a=>l(o).fileClickMode=a),value:"click"},{default:i(()=>e[40]||(e[40]=[n("单击进入")])),_:1,__:[40]},8,["modelValue"]),t(m,{modelValue:l(o).fileClickMode,"onUpdate:modelValue":e[5]||(e[5]=a=>l(o).fileClickMode=a),value:"dbclick"},{default:i(()=>e[41]||(e[41]=[n("双击进入")])),_:1,__:[41]},8,["modelValue"]),e[42]||(e[42]=u("div",{class:"el-form-item-tips"}," 控制文件和文件夹的点击习惯, 单击/双击打开文件夹或预览文件 ",-1))]),_:1,__:[42]}),t(d,{label:"移动端文件操作习惯"},{default:i(()=>[t(m,{modelValue:l(o).mobileFileClickMode,"onUpdate:modelValue":e[6]||(e[6]=a=>l(o).mobileFileClickMode=a),value:"click"},{default:i(()=>e[43]||(e[43]=[n("单击进入")])),_:1,__:[43]},8,["modelValue"]),t(m,{modelValue:l(o).mobileFileClickMode,"onUpdate:modelValue":e[7]||(e[7]=a=>l(o).mobileFileClickMode=a),value:"dbclick"},{default:i(()=>e[44]||(e[44]=[n("双击进入")])),_:1,__:[44]},8,["modelValue"]),e[45]||(e[45]=u("div",{class:"el-form-item-tips"}," 控制文件和文件夹的点击习惯, 单击/双击打开文件夹或预览文件 ",-1))]),_:1,__:[45]}),t(d,{label:"默认最大显示文件数"},{default:i(()=>[t(T,{modelValue:l(o).maxShowSize,"onUpdate:modelValue":e[8]||(e[8]=a=>l(o).maxShowSize=a),min:1},null,8,["modelValue"]),e[46]||(e[46]=u("div",{class:"el-form-item-tips"}," 默认最大显示文件数, 用于控制文件夹中文件的显示数量，防止文件过多导致页面卡顿 ",-1))]),_:1,__:[46]}),t(d,{label:"每次加载更多文件数"},{default:i(()=>[t(T,{modelValue:l(o).loadMoreSize,"onUpdate:modelValue":e[9]||(e[9]=a=>l(o).loadMoreSize=a),min:1},null,8,["modelValue"]),e[47]||(e[47]=u("div",{class:"el-form-item-tips"}," 当想显示更多文件时，每次额外显示的文件数 ",-1))]),_:1,__:[47]}),t(d,{label:"默认排序字段"},{default:i(()=>[t(m,{modelValue:l(o).defaultSortField,"onUpdate:modelValue":e[10]||(e[10]=a=>l(o).defaultSortField=a),value:"name"},{default:i(()=>e[48]||(e[48]=[n("文件名")])),_:1,__:[48]},8,["modelValue"]),t(m,{modelValue:l(o).defaultSortField,"onUpdate:modelValue":e[11]||(e[11]=a=>l(o).defaultSortField=a),value:"size"},{default:i(()=>e[49]||(e[49]=[n("文件大小")])),_:1,__:[49]},8,["modelValue"]),t(m,{modelValue:l(o).defaultSortField,"onUpdate:modelValue":e[12]||(e[12]=a=>l(o).defaultSortField=a),value:"time"},{default:i(()=>e[50]||(e[50]=[n("修改时间")])),_:1,__:[50]},8,["modelValue"]),e[51]||(e[51]=u("div",{class:"el-form-item-tips"}," 默认排序方式, 用于控制文件夹中文件的显示顺序 ",-1))]),_:1,__:[51]}),t(d,{label:"默认排序方式"},{default:i(()=>[t(m,{modelValue:l(o).defaultSortOrder,"onUpdate:modelValue":e[13]||(e[13]=a=>l(o).defaultSortOrder=a),value:"asc"},{default:i(()=>e[52]||(e[52]=[n("升序")])),_:1,__:[52]},8,["modelValue"]),t(m,{modelValue:l(o).defaultSortOrder,"onUpdate:modelValue":e[14]||(e[14]=a=>l(o).defaultSortOrder=a),value:"desc"},{default:i(()=>e[53]||(e[53]=[n("降序")])),_:1,__:[53]},8,["modelValue"]),e[54]||(e[54]=u("div",{class:"el-form-item-tips"}," 默认排序方式, 用于控制文件夹中文件的显示顺序（文件和文件夹会分别排序，且始终是文件夹在前） ",-1))]),_:1,__:[54]}),t(d,{label:"显示目录文档"},{default:i(()=>[t(V,{modelValue:l(o).showDocument,"onUpdate:modelValue":e[15]||(e[15]=a=>l(o).showDocument=a)},null,8,["modelValue"]),e[55]||(e[55]=u("div",{class:"el-form-item-tips"}," 全局控制是否显示为存储源配置的目录文档 ",-1))]),_:1,__:[55]})]),_:1},8,["model","label-width","label-position","size"])),[[_,l(v)]]):k("",!0)]),_:1}),t(w,{label:"预览类型",name:"b"},{default:i(()=>[u("div",me,[t(j,{type:"info"},{title:i(()=>e[56]||(e[56]=[u("div",null,"以下类型不区分大小，且不支持为空，为空会自动恢复至默认值，如果需要关闭某项的所有预览，可以随便写个不存在的格式。",-1),u("div",null,"且这里填写了类型，不代表前端就能预览成功，这依赖浏览器是否支持该编码的，ZFile 程序不负责解码或转码。简单的测试文件是否可在某浏览器预览的方式(不包含Office)是: 新建一个浏览器标签页, 把文件拖进去, 看看是否能正常显示。",-1)])),_:1})]),l(o)?b((S(),g(y,{key:0,model:l(o),"label-width":l(s).adminForm.labelWidth,"label-position":l(s).adminForm.labelPosition,size:l(s).adminForm.size,"status-icon":"",class:"z-admin-form","element-loading-text":"保存中..."},{default:i(()=>[t(d,{label:"视频文件后缀"},{default:i(()=>[t(p,{modelValue:l(o).customVideoSuffix,"onUpdate:modelValue":e[17]||(e[17]=a=>l(o).customVideoSuffix=a)},{suffix:i(()=>[t(O,{content:"恢复默认"},{default:i(()=>[t(l(E),{class:"w-4 cursor-pointer",onClick:e[16]||(e[16]=a=>x("video"))})]),_:1})]),_:1},8,["modelValue"]),e[57]||(e[57]=u("div",{class:"el-form-item-tips"}," 自定义识别为视频格式的文件后缀，多个用逗号分开，如 'mp4,avi,mkv', 在此列表中的将调用播放器打开（能否播放要取决于浏览器是否支持，现代浏览器一般只支持封装格式为 h.264 (mp4) 的编码格式） ",-1))]),_:1,__:[57]}),t(d,{label:"图像文件后缀"},{default:i(()=>[t(p,{modelValue:l(o).customImageSuffix,"onUpdate:modelValue":e[19]||(e[19]=a=>l(o).customImageSuffix=a)},{suffix:i(()=>[t(O,{content:"恢复默认"},{default:i(()=>[t(l(E),{class:"w-4 cursor-pointer",onClick:e[18]||(e[18]=a=>x("image"))})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"音频文件后缀"},{default:i(()=>[t(p,{modelValue:l(o).customAudioSuffix,"onUpdate:modelValue":e[21]||(e[21]=a=>l(o).customAudioSuffix=a)},{suffix:i(()=>[t(O,{content:"恢复默认"},{default:i(()=>[t(l(E),{class:"w-4 cursor-pointer",onClick:e[20]||(e[20]=a=>x("audio"))})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"文本文件后缀"},{default:i(()=>[t(p,{modelValue:l(o).customTextSuffix,"onUpdate:modelValue":e[23]||(e[23]=a=>l(o).customTextSuffix=a)},{suffix:i(()=>[t(O,{content:"恢复默认"},{default:i(()=>[t(l(E),{class:"w-4 cursor-pointer",onClick:e[22]||(e[22]=a=>x("text"))})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"Office文件后缀"},{default:i(()=>[t(p,{modelValue:l(o).customOfficeSuffix,"onUpdate:modelValue":e[25]||(e[25]=a=>l(o).customOfficeSuffix=a)},{suffix:i(()=>[t(O,{content:"恢复默认"},{default:i(()=>[t(l(E),{class:"w-4 cursor-pointer",onClick:e[24]||(e[24]=a=>x("text"))})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","label-width","label-position","size"])),[[_,l(v)]]):k("",!0)]),_:1}),t(w,{label:"OnlyOffice",name:"c"},{default:i(()=>[l(o)?b((S(),g(y,{key:0,model:l(o),"label-width":l(s).adminForm.labelWidth,"label-position":l(s).adminForm.labelPosition,size:l(s).adminForm.size,"status-icon":"",class:"z-admin-form","element-loading-text":"保存中..."},{default:i(()=>[t(d,{label:"OnlyOffice 服务地址"},{default:i(()=>[t(p,{modelValue:l(o).onlyOfficeUrl,"onUpdate:modelValue":e[26]||(e[26]=a=>l(o).onlyOfficeUrl=a)},null,8,["modelValue"]),e[58]||(e[58]=u("div",{class:"el-form-item-tips"},[u("div",null,[n("OnlyOffice 服务地址，默认的公共服务不保证稳定性，推荐自行部署 OnlyOffice 服务. 部署教程："),u("a",{class:"link",href:"https://docs.zfile.vip/advanced/only-office",target:"_blank"},"https://docs.zfile.vip/advanced/only-office")]),u("ul",{class:"list-disc mt-2 ml-4"},[u("li",null,[n("预览：进行预览的文件需 OnlyOffice 服务能访问到，如您的 OnlyOffice在公网，要预览的文件在内网，则无法正常预览。 "),u("a",{class:"link",target:"_blank",href:"https://docs.zfile.vip/question/only-office-download-fail"}," (为什么 OnlyOffice 预览失败？) ")]),u("li",null,"保存：因保存功能依赖于 OnlyOffice 回调 ZFile 服务，所以需您的 ZFile 服务能被OnlyOffice 访问到。"),u("li",null,"浏览器安全规范：如您的 ZFile 是 https 协议的，OnlyOffice 服务也必须是 https协议的，否则无法正常使用。")])],-1))]),_:1,__:[58]}),t(d,{label:"OnlyOffice Secret"},{default:i(()=>[t(p,{modelValue:l(o).onlyOfficeSecret,"onUpdate:modelValue":e[27]||(e[27]=a=>l(o).onlyOfficeSecret=a)},null,8,["modelValue"]),e[59]||(e[59]=u("div",{class:"el-form-item-tips"},[n(" 如果你部署的 OnlyOffice 需要开启 JWT Token 认证，可在此处填写 Secret，否则可以留空。查看OnlyOffice Secret 文档： "),u("a",{class:"link",target:"_blank",href:"https://docs.zfile.vip/advanced/only-office#only-office-secret"}," https://docs.zfile.vip/advanced/only-office#only-office-secret ")],-1))]),_:1,__:[59]})]),_:1},8,["model","label-width","label-position","size"])),[[_,l(v)]]):k("",!0)]),_:1}),t(w,{label:"公告",name:"d"},{default:i(()=>[l(o)?b((S(),g(y,{key:0,model:l(o),"label-width":l(s).adminForm.labelWidth,"label-position":l(s).adminForm.labelPosition,size:l(s).adminForm.size,"status-icon":"",class:"z-admin-form","element-loading-text":"保存中..."},{default:i(()=>[t(d,{label:"显示公告"},{default:i(()=>[t(V,{modelValue:l(o).showAnnouncement,"onUpdate:modelValue":e[28]||(e[28]=a=>l(o).showAnnouncement=a)},null,8,["modelValue"])]),_:1}),t(d,{label:"公告内容"},{default:i(()=>[t(l(I),{modelValue:l(o).announcement,"onUpdate:modelValue":e[29]||(e[29]=a=>l(o).announcement=a),height:"400px"},null,8,["modelValue"]),e[60]||(e[60]=u("div",{class:"el-form-item-tips"}," 支持 Markdown 语法, 左右分栏, 所见即所得, 可以使用 HTML 语法 ",-1))]),_:1,__:[60]})]),_:1},8,["model","label-width","label-position","size"])),[[_,l(v)]]):k("",!0)]),_:1}),t(w,{label:"自定义 JS/CSS",name:"e"},{default:i(()=>[l(o)?b((S(),g(y,{key:0,model:l(o),"label-width":l(s).adminForm.labelWidth,"label-position":l(s).adminForm.labelPosition,size:l(s).adminForm.size,"status-icon":"",class:"z-admin-form","element-loading-text":"保存中..."},{default:i(()=>[t(d,{label:"自定义 CSS"},{default:i(()=>[t(p,{type:"textarea",autosize:{minRows:3},placeholder:"请输入自定义 CSS 内容",modelValue:l(o).customCss,"onUpdate:modelValue":e[30]||(e[30]=a=>l(o).customCss=a)},null,8,["modelValue"]),e[61]||(e[61]=u("div",{class:"el-form-item-tips"}," 自定义 CSS 内容, 无须写 <style></style> 标签 ",-1))]),_:1,__:[61]}),t(d,{label:"自定义 JS"},{default:i(()=>[t(p,{type:"textarea",autosize:{minRows:3},placeholder:"请输入自定义 JS 内容",modelValue:l(o).customJs,"onUpdate:modelValue":e[31]||(e[31]=a=>l(o).customJs=a)},null,8,["modelValue"]),e[62]||(e[62]=u("div",{class:"el-form-item-tips"}," 自定义 JS 脚本, <script><\/script> 可写可不写，会自动兼容. ",-1))]),_:1,__:[62]})]),_:1},8,["model","label-width","label-position","size"])),[[_,l(v)]]):k("",!0)]),_:1})]),_:1},8,["modelValue"]),t(d,{"label-width":l(s).adminForm.labelWidth,class:"admin-from-footer"},{default:i(()=>[t(R,{class:"ml-auto",type:"primary",icon:l(te),loading:l(v),onClick:l(P)},{default:i(()=>e[63]||(e[63]=[n("保存设置")])),_:1,__:[63]},8,["icon","loading","onClick"])]),_:1},8,["label-width"])])),[[_,l(A)]])}}};typeof C=="function"&&C(M);const Le=oe(M,[["__scopeId","data-v-e9e6e1fe"]]);export{Le as default};
