import{g as r,x as e,b as s,_ as O,Y as H,r as $,B as N,ak as L,k as a,w as i,f as o,F as p,G as x,h as c,e as v,z as w,a0 as A,y as g,a8 as V}from"./index-008199ed.js";import{r as R,a as T}from"./badge-c8e6d7be.js";import{b as D,c as U}from"./zfile-horizontal-3f5b05e9.js";import{_ as S}from"./zfile-basic-ce5d3448.js";import{h as G,u as q}from"./useAdminSetting-8228330a.js";import{d as I}from"./dayjs.min-3b74a704.js";import{E as P}from"./index-9e699d2b.js";import{E as J,Z as K,_ as Q,$ as Z,a0 as W,r as X,a1 as ee}from"./request-7014ab81.js";import{d as te}from"./user-12b1d757.js";import{r as oe}from"./CircleStackIcon-b82f03c9.js";import{r as E}from"./DocumentTextIcon-be3b1186.js";import{r as ne}from"./DocumentArrowDownIcon-aca8ea00.js";import"./directive-20abcd4b.js";import"./index-4ea0a277.js";const F=u=>{window.open(u)};function se(u,d){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"})])}function re(u,d){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function ae(u,d){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})])}function le(u,d){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function ie(u,d){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})])}function de(u,d){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})])}function ce(u,d){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function ue(u,d){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function he(u,d){return{logDownload:()=>{const m=P.service({fullscreen:!0,lock:!0,text:"下载中...",background:"rgba(0, 0, 0, 0.5)"});G().then(y=>{const{data:j,headers:b}=y,C="ZFile 诊断日志 - ".concat(I().format("YYYY-MM-DD HH:mm:ss"),".zip"),M=new Blob([j],{type:b["content-type"]});let h=document.createElement("a"),_=window.URL.createObjectURL(M);h.href=_,h.download=decodeURI(C),h.style.display="none",document.body.appendChild(h),h.click(),h.parentNode.removeChild(h),window.URL.revokeObjectURL(_)}).catch(y=>{J.error("下载日志失败.")}).finally(()=>{m.close()})},rebuildTitle:()=>{d.path.indexOf("/admin")!==-1&&(document.title=(d.meta.name||"ZFile")+" | 后台管理")}}}const ge={class:"h-full"},me={class:"fixed inset-0 flex"},fe={class:"absolute left-full top-0 flex w-16 justify-center pt-5"},pe={class:"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-2"},xe={class:"flex flex-1 flex-col"},ve={role:"list",class:"flex flex-1 flex-col gap-y-7"},we={role:"list",class:"-mx-2 space-y-1"},_e={role:"list",class:"-mx-2 mt-2 space-y-1"},ke={class:"truncate"},ye={role:"list",class:"-mx-2 mt-2 space-y-1"},be=["onClick"],Ce={class:"truncate"},Me={class:"hidden lg:fixed lg:inset-y-0 lg:z-auto lg:flex lg:w-72 lg:flex-col"},$e={class:"flex grow flex-col gap-y-5 overflow-y-auto border-r border-gray-200 bg-white px-6"},Ae={class:"flex h-16 shrink-0 items-center"},Be={class:"flex flex-1 flex-col"},je={role:"list",class:"flex flex-1 flex-col gap-y-7"},Ze={role:"list",class:"-mx-2 space-y-1"},ze={role:"list",class:"-mx-2 mt-2 space-y-1"},Le={class:"truncate"},Ve={role:"list",class:"-mx-2 mt-2 space-y-1"},Re=["onClick"],De={class:"truncate"},Ee={class:"mt-auto flex justify-center space-x-5 px-6 mb-5"},Fe={class:"cursor-pointer",title:"ZFile 文档",target:"_blank",href:"https://github.com/zfile-dev/zfile"},Ye={class:"sticky top-0 flex items-center gap-x-6 bg-white px-4 py-4 shadow-sm sm:px-6 lg:hidden"},Oe={class:"mx-auto flex space-x-2"},He={class:"admin-main-content pb-16 sm:pt-10 sm:pb-26 lg:py-10 lg:pl-72 bg-gray-50 h-full overflow-y-auto"},Ne={class:"bg-white shadow h-full min-h-full sm:mx-10 sm:h-auto sm:rounded-lg sm:px-6 lg:px-8"},Te={class:"box animate__animated animate__fadeIn z-admin-body-wrapper"},nt={__name:"admin",setup(u){const{siteSetting:d}=q();let B=O(),l=H();const m=$(!1),{rebuildTitle:y,logDownload:j}=he(B,l);N(()=>l.path,()=>{y()},{immediate:!0});const b=$([{id:1,name:"站点设置",href:"/admin/site-setting",icon:R},{id:2,name:"存储源设置",href:"/admin/storage-list",icon:oe},{id:3,name:"显示设置",href:"/admin/view-setting",icon:le}]),C=$([{id:1,name:"直/短链设置",href:"/admin/download-link/setting",icon:R},{id:2,name:"短链管理",href:"/admin/download-link",icon:de},{id:3,name:"下载日志",href:"/admin/download-link/log",icon:E}]),M=$([{id:1,name:"用户管理",href:"/admin/user-list",icon:ue},{id:2,name:"单点登录",href:"/admin/sso",icon:ce},{id:2,name:"安全设置",href:"/admin/security-setting",icon:re},{id:3,name:"访问控制",href:"/admin/access",icon:ie},{id:2,name:"登录日志",href:"/admin/login-log",icon:E},{id:4,name:"系统日志下载",href:"#",icon:ne,onClick:j},{id:5,name:"注销登录",href:"#",icon:se,onClick:()=>{te().then(k=>{B.push("/login")})}}]),h=()=>{d.value.siteAdminLogoTargetMode==="_self"?window.location.href="/":F("/")},_=()=>{d.value.siteAdminVersionOpenChangeLog&&F("https://docs.zfile.vip/changelog/pro/")};return(k,n)=>{const f=L("router-link"),z=K,Y=L("router-view");return s(),r("div",ge,[a(o(ee),{as:"template",show:o(m)},{default:i(()=>[a(o(Q),{as:"div",class:"relative z-50 lg:hidden",onClose:n[1]||(n[1]=t=>m.value=!1)},{default:i(()=>[a(o(Z),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>n[3]||(n[3]=[e("div",{class:"fixed inset-0 bg-gray-900/80"},null,-1)])),_:1,__:[3]}),e("div",me,[a(o(Z),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:i(()=>[a(o(W),{class:"relative mr-16 flex w-full max-w-xs flex-1"},{default:i(()=>[a(o(Z),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[e("div",fe,[e("button",{type:"button",class:"-m-2.5 p-2.5",onClick:n[0]||(n[0]=t=>m.value=!1)},[n[4]||(n[4]=e("span",{class:"sr-only"},"Close sidebar",-1)),a(o(X),{class:"h-6 w-6 text-white","aria-hidden":"true"})])])]),_:1}),e("div",pe,[n[7]||(n[7]=e("div",{class:"flex h-16 shrink-0 items-center"},[e("img",{class:"h-8 w-auto",src:D,alt:"Your Company"})],-1)),e("nav",xe,[e("ul",ve,[e("li",null,[e("ul",we,[(s(!0),r(p,null,x(o(b),t=>(s(),r("li",{key:t.id},[a(f,{to:t.href,class:c([t.href===o(l).path?"bg-gray-50 text-indigo-600":"text-gray-700 hover:text-indigo-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"])},{default:i(()=>[(s(),v(w(t.icon),{class:c([t.href===o(l).path?"text-indigo-600":"text-gray-400 group-hover:text-indigo-600","h-6 w-6 shrink-0"]),"aria-hidden":"true"},null,8,["class"])),A(" "+g(t.name),1)]),_:2},1032,["to","class"])]))),128))])]),e("li",null,[n[5]||(n[5]=e("div",{class:"text-xs font-semibold leading-6 text-gray-400"},"链接管理",-1)),e("ul",_e,[(s(!0),r(p,null,x(o(C),t=>(s(),r("li",{key:t.id},[a(f,{to:t.href,class:c([t.href===o(l).path?"bg-gray-50 text-indigo-600":"text-gray-700 hover:text-indigo-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"])},{default:i(()=>[(s(),v(w(t.icon),{class:c([t.href===o(l).path?"text-indigo-600":"text-gray-400 group-hover:text-indigo-600","h-6 w-6 shrink-0"]),"aria-hidden":"true"},null,8,["class"])),e("span",ke,g(t.name),1)]),_:2},1032,["to","class"])]))),128))])]),e("li",null,[n[6]||(n[6]=e("div",{class:"text-xs font-semibold leading-6 text-gray-400"},"系统设置",-1)),e("ul",ye,[(s(!0),r(p,null,x(o(M),t=>(s(),r("li",{key:t.id,onClick:t.onClick},[a(f,{to:t.href,class:c([t.href===o(l).path?"bg-gray-50 text-indigo-600":"text-gray-700 hover:text-indigo-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"])},{default:i(()=>[(s(),v(w(t.icon),{class:c([t.href===o(l).path?"text-indigo-600":"text-gray-400 group-hover:text-indigo-600","h-6 w-6 shrink-0"]),"aria-hidden":"true"},null,8,["class"])),e("span",Ce,g(t.name),1)]),_:2},1032,["to","class"])],8,be))),128))])])])])])]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]),e("div",Me,[e("div",$e,[e("div",Ae,[e("div",{onClick:h,class:"cursor-pointer flex-shrink-0 flex items-center"},n[8]||(n[8]=[e("img",{class:"h-8 w-auto",src:D,alt:"ZFile"},null,-1)])),e("div",{onClick:_,class:"cursor-pointer flex-shrink-0 flex items-center"},[a(z,{class:"hidden lg:block text-sm font-bold word ml-1 tracking-wider"},{default:i(()=>[A(g(("constant"in k?k.constant:o(V)).version),1)]),_:1})])]),e("nav",Be,[e("ul",je,[e("li",null,[e("ul",Ze,[(s(!0),r(p,null,x(o(b),t=>(s(),r("li",{key:t.id},[a(f,{to:t.href,class:c([t.href===o(l).path?"bg-gray-50 text-indigo-600":"text-gray-700 hover:text-indigo-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"])},{default:i(()=>[(s(),v(w(t.icon),{class:c([t.href===o(l).path?"text-indigo-600":"text-gray-400 group-hover:text-indigo-600","h-6 w-6 shrink-0"]),"aria-hidden":"true"},null,8,["class"])),A(" "+g(t.name),1)]),_:2},1032,["to","class"])]))),128))])]),e("li",null,[n[9]||(n[9]=e("div",{class:"text-xs font-semibold leading-6 text-gray-400"},"链接管理",-1)),e("ul",ze,[(s(!0),r(p,null,x(o(C),t=>(s(),r("li",{key:t.id},[a(f,{to:t.href,class:c([t.href===o(l).path?"bg-gray-50 text-indigo-600":"text-gray-700 hover:text-indigo-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"])},{default:i(()=>[(s(),v(w(t.icon),{class:c([t.href===o(l).path?"text-indigo-600":"text-gray-400 group-hover:text-indigo-600","h-6 w-6 shrink-0"]),"aria-hidden":"true"},null,8,["class"])),e("span",Le,g(t.name),1)]),_:2},1032,["to","class"])]))),128))])]),e("li",null,[n[10]||(n[10]=e("div",{class:"text-xs font-semibold leading-6 text-gray-400"},"系统设置",-1)),e("ul",Ve,[(s(!0),r(p,null,x(o(M),t=>(s(),r("li",{key:t.id,onClick:t.onClick},[a(f,{to:t.href,class:c([t.href===o(l).path?"bg-gray-50 text-indigo-600":"text-gray-700 hover:text-indigo-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"])},{default:i(()=>[(s(),v(w(t.icon),{class:c([t.href===o(l).path?"text-indigo-600":"text-gray-400 group-hover:text-indigo-600","h-6 w-6 shrink-0"]),"aria-hidden":"true"},null,8,["class"])),e("span",De,g(t.name),1)]),_:2},1032,["to","class"])],8,Re))),128))])]),e("li",Ee,[n[11]||(n[11]=e("a",{class:"cursor-pointer",title:"Github",target:"_blank",href:"https://github.com/zfile-dev/zfile"},[e("img",{class:"w-8 h-8",src:U})],-1)),e("a",Fe,[a(o(ae),{class:"w-8 h-8"})])])])])])]),e("div",Ye,[e("button",{type:"button",class:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:n[2]||(n[2]=t=>m.value=!0)},[n[12]||(n[12]=e("span",{class:"sr-only"},"Open sidebar",-1)),a(o(T),{class:"h-6 w-6","aria-hidden":"true"})]),e("div",Oe,[e("div",{onClick:h,class:"cursor-pointer flex-shrink-0 flex items-center"},n[13]||(n[13]=[e("img",{class:"h-8 w-auto",src:S,alt:"ZFile"},null,-1)])),e("div",{onClick:_,class:"cursor-pointer flex-shrink-0 flex items-center"},[a(z,{class:"hidden lg:block text-sm font-bold word tracking-wider"},{default:i(()=>[A(g(("constant"in k?k.constant:o(V)).version),1)]),_:1})])])]),e("main",He,[e("div",Ne,[e("div",Te,[a(Y)])])])])}}};export{nt as default};
