System.register(["./index-legacy-e574cec8.js","./loading-legacy-2688a411.js","./el-table-column-plus-legacy-a2eac651.js","./button-legacy-f53896dd.js","./tag-legacy-5e0686c8.js","./select-legacy-8b64fa67.js","./scrollbar-legacy-0817fabf.js","./popper-legacy-ef8fd66b.js","./input-legacy-bc871eba.js","./Cancel-legacy-ab83e01a.js","./alert-legacy-3cfbcde8.js","./admin-storage-legacy-6381f83d.js","./base-legacy-173045dc.js","./request-legacy-61b983ae.js","./index-legacy-47a1148a.js","./route-block-legacy-509c7347.js","./_plugin-vue_export-helper-legacy-8fcf0e06.js","./FolderIcon-legacy-f2907149.js","./TrashIcon-legacy-3360f913.js","./PlusIcon-legacy-2c71b691.js","./CheckBadgeIcon-legacy-a01a5b9d.js","./directive-legacy-64af483a.js","./index-legacy-69b9ad2b.js","./index-legacy-ea3d196e.js","./index-legacy-c317e588.js","./index-legacy-1ae34dc2.js","./_initCloneObject-legacy-b35b9836.js","./index-legacy-d493f4b0.js","./debounce-legacy-321ba92e.js","./index-legacy-693c88b9.js","./index-legacy-183af9d3.js","./strings-legacy-b2510e8b.js","./scroll-legacy-68db505b.js","./vnode-legacy-bdad68af.js","./admin-form-header-legacy-5b0f136c.js","./arrow-left-legacy-eb9efd7f.js","./index-legacy-b5baaeae.js","./validator-legacy-a3ca6880.js"],(function(e,l){"use strict";var n,a,t,i,c,o,r,s,d,u,f,g,p,m,b,y,v,h,j,_,x,w,k,I,z,V,C,E,U,D,T,q,B,G,O,F,P,W,Y;return{setters:[function(e){n=e.r,a=e.a3,t=e.Y,i=e._,c=e.o,o=e.b,r=e.g,s=e.k,d=e.w,u=e.x,f=e.a0,g=e.f,p=e.$,m=e.e,b=e.aj,y=e.l},null,function(e){v=e._,h=e.a},function(e){j=e.E},null,function(e){_=e.E,x=e.a},null,null,null,function(e){w=e._},function(e){k=e.E},function(e){I=e.k,z=e.m,V=e.j},function(e){C=e.i},function(e){E=e.E,U=e.b},function(e){D=e.E},function(e){T=e.b},function(e){q=e._},function(e){B=e.r,G=e.a,O=e.b},function(e){F=e.r},function(e){P=e.r},function(e){W=e.r},function(e){Y=e.v},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent=".zfile-admin-filter-body[data-v-4f0c8c9e] .el-form-sub-title{max-width:100%}.zfile-admin-filter-body .rules-tips[data-v-4f0c8c9e]{padding:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:700}.zfile-admin-filter-body .rules-tips-link[data-v-4f0c8c9e]{margin-top:.5rem}.zfile-admin-filter-body .rules-tips-link[data-v-4f0c8c9e]>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.25rem * var(--tw-space-x-reverse));margin-left:calc(1.25rem * calc(1 - var(--tw-space-x-reverse)))}.zfile-admin-filter-body .rules-tips-link svg[data-v-4f0c8c9e]{height:1rem;line-height:1.25rem;vertical-align:text-bottom}.el-table[data-v-4f0c8c9e] .cell{padding-right:.5rem;padding-left:0}.el-table[data-v-4f0c8c9e] .el-table__row{height:4rem}.el-table[data-v-4f0c8c9e] .el-table__row:last-child .el-table__cell{border-bottom-width:0px}.el-table[data-v-4f0c8c9e] .el-table__inner-wrapper:before{content:none}.add-more-btn[data-v-4f0c8c9e]{margin-bottom:.5rem;width:100%;border-style:dashed}@media not all and (min-width: 768px){.add-more-btn[data-v-4f0c8c9e]{margin-top:.5rem}}.save-btn[data-v-4f0c8c9e]{display:-webkit-box;display:flex}.save-btn .el-button[data-v-4f0c8c9e]{margin-left:auto}\n",document.head.appendChild(l);var $=n([]),A=n(!1);function M(e,l){var n=l.params.storageId,a=function(){$.value.push({mode:"hidden",expression:"",storageId:n,description:"表达式 - "+$.value.length})};return{loading:A,loadData:function(){I(n).then((function(e){$.value=e.data,0===$.value.length&&a()}))},list:$,addItem:a,deleteItem:function(e){$.value.splice(e,1)},saveData:function(){$.value.find((function(e){if(C(e.expression))return E.warning("请检查数据填写是否完整"),!0}))||(A.value=!0,z(n,$.value).then((function(){D.confirm("保存成功, 是否返回存储源列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(l){"confirm"===l&&e.push("/admin/storage-list")}})})).finally((function(){A.value=!1})))}}}var N={class:"zfile-admin-filter-body"},Q={class:"rules-tips-link"},R={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},S={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},X={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},Z={class:"save-btn"},H={__name:"[storageId]",props:{storageId:{type:Number,required:!1}},setup:function(e){var l=a(),I=t(),z=M(i(),I),C=z.loading,E=z.loadData,D=z.list,T=z.addItem,q=z.deleteItem,$=z.saveData;c((function(){E(),H()}));var A=n(),H=function(){V(I.params.storageId).then((function(e){e.data.type=e.data.type.key,A.value=e.data}))};return function(e,n){var a,t=k,i=w,c=v,I=U,z=_,V=x,E=j,M=h,H=Y;return o(),r("div",N,[s(i,{to:"/admin/storage-list",title:"过滤文件（"+(null===(a=g(A))||void 0===a?void 0:a.name)+"）"},{default:d((function(){return[s(t,{closable:!1,type:"info"},{default:d((function(){return[n[3]||(n[3]=u("div",{class:"rules-tips"},"Glob 表达式规则：",-1)),n[4]||(n[4]=u("div",{class:"rules-tips"},[u("b",null,"*"),f("：单级路径通配符，如表达式 "),u("span",{class:"select-all code"},"/*.jpg"),f(" 可以匹配根路径下所有的 jpg 后缀的文件")],-1)),n[5]||(n[5]=u("div",{class:"rules-tips"},[u("b",null,"**"),f("：多级路径通配符，如表达式 "),u("span",{class:"select-all code"},"/**.jpg"),f(" 可以匹配所有路径下的 jpg 后缀的文件")],-1)),u("div",Q,[u("a",R,[s(g(B),{class:"inline mr-1"}),n[0]||(n[0]=u("span",null,"参考文章 (Wikipedia)",-1))]),u("a",S,[s(g(B),{class:"inline mr-1"}),n[1]||(n[1]=f("参考文章 (阮一峰)"))]),u("a",X,[s(g(B),{class:"inline mr-1"}),n[2]||(n[2]=f("参考文章 (Github)"))])])]})),_:1,__:[3,4,5]})]})),_:1},8,["title"]),p((o(),m(M,{size:g(l).adminTable.size,"row-key":"id",data:g(D)},{default:d((function(){return[g(b)?(o(),m(c,{key:0,label:"ID",prop:"id"})):y("",!0),s(c,{label:"描述",prop:"description"},{default:d((function(e){return[s(I,{"prefix-icon":g(G),placeholder:"请输入表达式描述",modelValue:e.row.description,"onUpdate:modelValue":function(l){return e.row.description=l}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]})),_:1}),s(c,{label:"表达式",prop:"expression"},{default:d((function(e){return[s(I,{"prefix-icon":g(O),placeholder:"请输入表达式",modelValue:e.row.expression,"onUpdate:modelValue":function(l){return e.row.expression=l},modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]})),_:1}),s(c,{label:"模式",width:"200",prop:"mode"},{default:d((function(e){return[s(V,{modelValue:e.row.mode,"onUpdate:modelValue":function(l){return e.row.mode=l}},{default:d((function(){return[s(z,{label:"仅隐藏",value:"hidden"}),s(z,{label:"隐藏并不可访问(针对目录)",value:"inaccessible"}),s(z,{label:"隐藏并不可访问不可下载(针对文件)",value:"disable_download"})]})),_:2},1032,["modelValue","onUpdate:modelValue"])]})),_:1}),s(c,{align:"center",label:"操作",width:"60px"},{default:d((function(e){return[s(E,{type:"danger",onClick:function(l){return g(q)(e.$index)},icon:g(F)},null,8,["onClick","icon"])]})),_:1})]})),_:1},8,["size","data"])),[[H,g(C)]]),s(E,{class:"add-more-btn",size:"default",icon:g(P),onClick:g(T)},{default:d((function(){return n[6]||(n[6]=[f("添加更多")])})),_:1,__:[6]},8,["icon","onClick"]),u("div",Z,[s(E,{type:"primary",size:"default",icon:g(W),onClick:g($)},{default:d((function(){return n[7]||(n[7]=[f("保存设置")])})),_:1,__:[7]},8,["icon","onClick"])])])}}};"function"==typeof T&&T(H),e("default",q(H,[["__scopeId","data-v-4f0c8c9e"]]))}}}));
