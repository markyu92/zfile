import{E as ce,F as ye}from"./button-30635c71.js";import{c as P,E as Te,O as $e,w as ie}from"./index-60380bfa.js";import{E as Fe}from"./index-0da14aee.js";import{A as $,_ as A,E as pe,F as Re,j as Se,I as fe,y as ke}from"./index-4ea0a277.js";import{u as Oe}from"./request-7014ab81.js";import{c as Pe,E as De,d as Ne,a as ve,C as Be,b as Ke,e as Le,f as Me,g as Ae,F as Ge,L as ze}from"./dropdown-40114633.js";import{p as Ue,q as X,d as G,r as T,Q as C,c as y,V as J,bq as He,E as Y,f as O,B as me,j as N,ak as b,b as D,e as U,w as m,k as S,I as Ye,aS as Ve,a as ee,M as Je,U as We,g as W,W as je,H as j,h as q,l as Z,as as ge,ad as qe,x as Qe,z as Xe,i as x,F as Ze,n as xe,m as eo,J as we}from"./index-008199ed.js";import{c as oo}from"./input-73d413ba.js";import{c as be}from"./refs-9142934b.js";const no=Ue({style:{type:X([String,Array,Object])},currentTabId:{type:X(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:X(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:to,ElCollectionItem:ro,COLLECTION_INJECTION_KEY:oe,COLLECTION_ITEM_INJECTION_KEY:lo}=Pe("RovingFocusGroup"),ne=Symbol("elRovingFocusGroup"),_e=Symbol("elRovingFocusGroupItem"),so={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},ao=(e,n)=>{if(n!=="rtl")return e;switch(e){case $.right:return $.left;case $.left:return $.right;default:return e}},io=(e,n,a)=>{const t=ao(e.code,a);if(!(n==="vertical"&&[$.left,$.right].includes(t))&&!(n==="horizontal"&&[$.up,$.down].includes(t)))return so[t]},uo=(e,n)=>e.map((a,t)=>e[(t+n)%e.length]),te=e=>{const{activeElement:n}=document;for(const a of e)if(a===n||(a.focus(),n!==document.activeElement))return},de="currentTabIdChange",ue="rovingFocusGroup.entryFocus",co={bubbles:!1,cancelable:!0},po=G({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:no,emits:[de,"entryFocus"],setup(e,{emit:n}){var a;const t=T((a=e.currentTabId||e.defaultCurrentTabId)!=null?a:null),c=T(!1),u=T(!1),i=T(),{getItems:l}=C(oe,void 0),p=y(()=>[{outline:"none"},e.style]),g=d=>{n(de,d)},w=()=>{c.value=!0},_=P(d=>{var f;(f=e.onMousedown)==null||f.call(e,d)},()=>{u.value=!0}),h=P(d=>{var f;(f=e.onFocus)==null||f.call(e,d)},d=>{const f=!O(u),{target:B,currentTarget:F}=d;if(B===F&&f&&!O(c)){const K=new Event(ue,co);if(F==null||F.dispatchEvent(K),!K.defaultPrevented){const v=l().filter(R=>R.focusable),k=v.find(R=>R.active),I=v.find(R=>R.id===O(t)),M=[k,I,...v].filter(Boolean).map(R=>R.ref);te(M)}}u.value=!1}),o=P(d=>{var f;(f=e.onBlur)==null||f.call(e,d)},()=>{c.value=!1}),s=(...d)=>{n("entryFocus",...d)};J(ne,{currentTabbedId:He(t),loop:Y(e,"loop"),tabIndex:y(()=>O(c)?-1:0),rovingFocusGroupRef:i,rovingFocusGroupRootStyle:p,orientation:Y(e,"orientation"),dir:Y(e,"dir"),onItemFocus:g,onItemShiftTab:w,onBlur:o,onFocus:h,onMousedown:_}),me(()=>e.currentTabId,d=>{t.value=d!=null?d:null}),Oe(i,ue,s)}});function fo(e,n,a,t,c,u){return N(e.$slots,"default")}var vo=A(po,[["render",fo],["__file","roving-focus-group-impl.vue"]]);const mo=G({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:to,ElRovingFocusGroupImpl:vo}});function go(e,n,a,t,c,u){const i=b("el-roving-focus-group-impl"),l=b("el-focus-group-collection");return D(),U(l,null,{default:m(()=>[S(i,Ye(Ve(e.$attrs)),{default:m(()=>[N(e.$slots,"default")]),_:3},16)]),_:3})}var wo=A(mo,[["render",go],["__file","roving-focus-group.vue"]]);const Q=Symbol("elDropdown"),{ButtonGroup:bo}=ce,_o=G({name:"ElDropdown",components:{ElButton:ce,ElButtonGroup:bo,ElScrollbar:Fe,ElDropdownCollection:De,ElTooltip:Te,ElRovingFocusGroup:wo,ElOnlyChild:$e,ElIcon:pe,ArrowDown:Re},props:Ne,emits:["visible-change","click","command"],setup(e,{emit:n}){const a=ge(),t=ee("dropdown"),{t:c}=Je(),u=T(),i=T(),l=T(),p=T(),g=T(null),w=T(null),_=T(!1),h=y(()=>({maxHeight:Se(e.maxHeight)})),o=y(()=>[t.m(v.value)]),s=y(()=>oo(e.trigger)),d=fe().value,f=y(()=>e.id||d);me([u,s],([r,E],[z])=>{var le,se,ae;(le=z==null?void 0:z.$el)!=null&&le.removeEventListener&&z.$el.removeEventListener("pointerenter",I),(se=r==null?void 0:r.$el)!=null&&se.removeEventListener&&r.$el.removeEventListener("pointerenter",I),(ae=r==null?void 0:r.$el)!=null&&ae.addEventListener&&E.includes("hover")&&r.$el.addEventListener("pointerenter",I)},{immediate:!0}),We(()=>{var r,E;(E=(r=u.value)==null?void 0:r.$el)!=null&&E.removeEventListener&&u.value.$el.removeEventListener("pointerenter",I)});function B(){F()}function F(){var r;(r=l.value)==null||r.onClose()}function K(){var r;(r=l.value)==null||r.onOpen()}const v=ke();function k(...r){n("command",...r)}function I(){var r,E;(E=(r=u.value)==null?void 0:r.$el)==null||E.focus()}function L(){}function M(){const r=O(p);s.value.includes("hover")&&(r==null||r.focus()),w.value=null}function R(r){w.value=r}function re(r){_.value||(r.preventDefault(),r.stopImmediatePropagation())}function V(){n("visible-change",!0)}function H(r){var E;(r==null?void 0:r.type)==="keydown"&&((E=p.value)==null||E.focus())}function Ce(){n("visible-change",!1)}return J(Q,{contentRef:p,role:y(()=>e.role),triggerId:f,isUsingKeyboard:_,onItemEnter:L,onItemLeave:M}),J("elDropdown",{instance:a,dropdownSize:v,handleClick:B,commandHandler:k,trigger:Y(e,"trigger"),hideOnClick:Y(e,"hideOnClick")}),{t:c,ns:t,scrollbar:g,wrapStyle:h,dropdownTriggerKls:o,dropdownSize:v,triggerId:f,currentTabId:w,handleCurrentTabIdChange:R,handlerMainButtonClick:r=>{n("click",r)},handleEntryFocus:re,handleClose:F,handleOpen:K,handleBeforeShowTooltip:V,handleShowTooltip:H,handleBeforeHideTooltip:Ce,onFocusAfterTrapped:r=>{var E,z;r.preventDefault(),(z=(E=p.value)==null?void 0:E.focus)==null||z.call(E,{preventScroll:!0})},popperRef:l,contentRef:p,triggeringElementRef:u,referenceElementRef:i}}});function Io(e,n,a,t,c,u){var i;const l=b("el-dropdown-collection"),p=b("el-roving-focus-group"),g=b("el-scrollbar"),w=b("el-only-child"),_=b("el-tooltip"),h=b("el-button"),o=b("arrow-down"),s=b("el-icon"),d=b("el-button-group");return D(),W("div",{class:q([e.ns.b(),e.ns.is("disabled",e.disabled)])},[S(_,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(i=e.referenceElementRef)==null?void 0:i.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:"".concat(e.ns.namespace.value,"-zoom-in-top"),teleported:e.teleported,pure:"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},je({content:m(()=>[S(g,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:m(()=>[S(p,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:m(()=>[S(l,null,{default:m(()=>[N(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:m(()=>[S(w,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:m(()=>[N(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(D(),U(d,{key:0},{default:m(()=>[S(h,j({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:m(()=>[N(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),S(h,j({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:m(()=>[S(s,{class:q(e.ns.e("icon"))},{default:m(()=>[S(o)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Z("v-if",!0)],2)}var ho=A(_o,[["render",Io],["__file","dropdown.vue"]]);const Eo=G({components:{ElRovingFocusCollectionItem:ro},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:n}){const{currentTabbedId:a,loop:t,onItemFocus:c,onItemShiftTab:u}=C(ne,void 0),{getItems:i}=C(oe,void 0),l=fe(),p=T(),g=P(o=>{n("mousedown",o)},o=>{e.focusable?c(O(l)):o.preventDefault()}),w=P(o=>{n("focus",o)},()=>{c(O(l))}),_=P(o=>{n("keydown",o)},o=>{const{code:s,shiftKey:d,target:f,currentTarget:B}=o;if(s===$.tab&&d){u();return}if(f!==B)return;const F=io(o);if(F){o.preventDefault();let v=i().filter(k=>k.focusable).map(k=>k.ref);switch(F){case"last":{v.reverse();break}case"prev":case"next":{F==="prev"&&v.reverse();const k=v.indexOf(B);v=t.value?uo(v,k+1):v.slice(k+1);break}}qe(()=>{te(v)})}}),h=y(()=>a.value===O(l));return J(_e,{rovingFocusGroupItemRef:p,tabIndex:y(()=>O(h)?0:-1),handleMousedown:g,handleFocus:w,handleKeydown:_}),{id:l,handleKeydown:_,handleFocus:w,handleMousedown:g}}});function Co(e,n,a,t,c,u){const i=b("el-roving-focus-collection-item");return D(),U(i,{id:e.id,focusable:e.focusable,active:e.active},{default:m(()=>[N(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var yo=A(Eo,[["render",Co],["__file","roving-focus-item.vue"]]);const To=G({name:"DropdownItemImpl",components:{ElIcon:pe},props:ve,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:n}){const a=ee("dropdown"),{role:t}=C(Q,void 0),{collectionItemRef:c}=C(Be,void 0),{collectionItemRef:u}=C(lo,void 0),{rovingFocusGroupItemRef:i,tabIndex:l,handleFocus:p,handleKeydown:g,handleMousedown:w}=C(_e,void 0),_=be(c,u,i),h=y(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),o=P(s=>{if([$.enter,$.numpadEnter,$.space].includes(s.code))return s.preventDefault(),s.stopImmediatePropagation(),n("clickimpl",s),!0},g);return{ns:a,itemRef:_,dataset:{[Ke]:""},role:h,tabIndex:l,handleFocus:p,handleKeydown:o,handleMousedown:w}}});function $o(e,n,a,t,c,u){const i=b("el-icon");return D(),W(Ze,null,[e.divided?(D(),W("li",{key:0,role:"separator",class:q(e.ns.bem("menu","item","divided"))},null,2)):Z("v-if",!0),Qe("li",j({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:l=>e.$emit("clickimpl",l),onFocus:e.handleFocus,onKeydown:x(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:l=>e.$emit("pointermove",l),onPointerleave:l=>e.$emit("pointerleave",l)}),[e.icon?(D(),U(i,{key:0},{default:m(()=>[(D(),U(Xe(e.icon)))]),_:1})):Z("v-if",!0),N(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Fo=A(To,[["render",$o],["__file","dropdown-item-impl.vue"]]);const Ie=()=>{const e=C("elDropdown",{}),n=y(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:n}},Ro=G({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Le,ElRovingFocusItem:yo,ElDropdownItemImpl:Fo},inheritAttrs:!1,props:ve,emits:["pointermove","pointerleave","click"],setup(e,{emit:n,attrs:a}){const{elDropdown:t}=Ie(),c=ge(),u=T(null),i=y(()=>{var o,s;return(s=(o=O(u))==null?void 0:o.textContent)!=null?s:""}),{onItemEnter:l,onItemLeave:p}=C(Q,void 0),g=P(o=>(n("pointermove",o),o.defaultPrevented),ie(o=>{if(e.disabled){p(o);return}const s=o.currentTarget;s===document.activeElement||s.contains(document.activeElement)||(l(o),o.defaultPrevented||s==null||s.focus())})),w=P(o=>(n("pointerleave",o),o.defaultPrevented),ie(p)),_=P(o=>{if(!e.disabled)return n("click",o),o.type!=="keydown"&&o.defaultPrevented},o=>{var s,d,f;if(e.disabled){o.stopImmediatePropagation();return}(s=t==null?void 0:t.hideOnClick)!=null&&s.value&&((d=t.handleClick)==null||d.call(t)),(f=t.commandHandler)==null||f.call(t,e.command,c,o)}),h=y(()=>({...e,...a}));return{handleClick:_,handlePointerMove:g,handlePointerLeave:w,textContent:i,propsAndAttrs:h}}});function So(e,n,a,t,c,u){var i;const l=b("el-dropdown-item-impl"),p=b("el-roving-focus-item"),g=b("el-dropdown-collection-item");return D(),U(g,{disabled:e.disabled,"text-value":(i=e.textValue)!=null?i:e.textContent},{default:m(()=>[S(p,{focusable:!e.disabled},{default:m(()=>[S(l,j(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:m(()=>[N(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var he=A(Ro,[["render",So],["__file","dropdown-item.vue"]]);const ko=G({name:"ElDropdownMenu",props:Me,setup(e){const n=ee("dropdown"),{_elDropdownSize:a}=Ie(),t=a.value,{focusTrapRef:c,onKeydown:u}=C(ye,void 0),{contentRef:i,role:l,triggerId:p}=C(Q,void 0),{collectionRef:g,getItems:w}=C(Ae,void 0),{rovingFocusGroupRef:_,rovingFocusGroupRootStyle:h,tabIndex:o,onBlur:s,onFocus:d,onMousedown:f}=C(ne,void 0),{collectionRef:B}=C(oe,void 0),F=y(()=>[n.b("menu"),n.bm("menu",t==null?void 0:t.value)]),K=be(i,g,c,_,B),v=P(I=>{var L;(L=e.onKeydown)==null||L.call(e,I)},I=>{const{currentTarget:L,code:M,target:R}=I;if(L.contains(R),$.tab===M&&I.stopImmediatePropagation(),I.preventDefault(),R!==O(i)||!Ge.includes(M))return;const V=w().filter(H=>!H.disabled).map(H=>H.ref);ze.includes(M)&&V.reverse(),te(V)});return{size:t,rovingFocusGroupRootStyle:h,tabIndex:o,dropdownKls:F,role:l,triggerId:p,dropdownListWrapperRef:K,handleKeydown:I=>{v(I),u(I)},onBlur:s,onFocus:d,onMousedown:f}}});function Oo(e,n,a,t,c,u){return D(),W("ul",{ref:e.dropdownListWrapperRef,class:q(e.dropdownKls),style:xe(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:x(e.handleKeydown,["self"]),onMousedown:x(e.onMousedown,["self"])},[N(e.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var Ee=A(ko,[["render",Oo],["__file","dropdown-menu.vue"]]);const Ho=eo(ho,{DropdownItem:he,DropdownMenu:Ee}),Yo=we(he),Vo=we(Ee);export{Yo as E,Vo as a,Ho as b};
