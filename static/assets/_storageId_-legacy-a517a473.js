System.register(["./index-legacy-e574cec8.js","./button-legacy-f53896dd.js","./table-column-legacy-0040b455.js","./checkbox-legacy-80a8805e.js","./tooltip-legacy-518b8698.js","./popper-legacy-ef8fd66b.js","./scrollbar-legacy-0817fabf.js","./tag-legacy-5e0686c8.js","./popover-legacy-fa927888.js","./arrow-left-legacy-eb9efd7f.js","./admin-storage-legacy-6381f83d.js","./route-block-legacy-509c7347.js","./_plugin-vue_export-helper-legacy-8fcf0e06.js","./QuestionMarkCircleIcon-legacy-13cc9795.js","./CheckBadgeIcon-legacy-a01a5b9d.js","./index-legacy-47a1148a.js","./request-legacy-61b983ae.js","./index-legacy-32709ede.js","./index-legacy-69b9ad2b.js","./index-legacy-c317e588.js","./index-legacy-b5baaeae.js","./vnode-legacy-bdad68af.js","./scroll-legacy-68db505b.js","./validator-legacy-a3ca6880.js","./index-legacy-1ae34dc2.js","./dropdown-legacy-648534c2.js","./index-legacy-ea3d196e.js","./_initCloneObject-legacy-b35b9836.js","./index-legacy-d493f4b0.js","./debounce-legacy-321ba92e.js"],(function(e,n){"use strict";var l,a,t,o,u,r,i,c,s,d,f,m,g,p,v,y,w,j,x,h,b,_,A,V,k,C,E,U,B,I,S,T,z;return{setters:[function(e){l=e.Y,a=e._,t=e.r,o=e.o,u=e.c,r=e.ak,i=e.b,c=e.g,s=e.x,d=e.k,f=e.w,m=e.y,g=e.f,p=e.a0,v=e.$,y=e.a1,w=e.a2,j=e.a8},function(e){x=e.E},null,null,null,null,null,null,null,function(e){h=e._},function(e){b=e.j,_=e.p,A=e.q},function(e){V=e.b},function(e){k=e._},function(e){C=e.r},function(e){E=e.r},function(e){U=e.E},function(e){B=e.E,I=e.e},function(e){S=e.E},function(e){T=e.E,z=e.a},null,null,null,null,null,null,null,null,null,null,null],execute:function(){var n=document.createElement("style");n.textContent=".zfile-admin-permission-index[data-v-1de60f1c] .el-table thead{color:unset}\n",document.head.appendChild(n);var N={class:"zfile-admin-permission-index"},P={class:"flex justify-between"},Q={class:"flex text-lg leading-6 font-medium text-gray-900"},R={class:"line-through"},q={class:"text-sm my-auto text-gray-400 ml-2"},D={class:"space-x-2"},M={class:"space-x-2"},O={class:"flex mt-5"},F={__name:"[storageId]",setup:function(e){var n=l(),V=a(),k=n.params.storageId,F=t([]),G=function(){A(k,F.value).then((function(e){var n=e.data;n.code===j.responseCode.SUCCESS?U.confirm("保存成功, 是否返回存储源列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(e){"confirm"===e&&V.push("/admin/storage-list")}}):n.code===j.responseCode.BAD_REQUEST?U.confirm("保存成功，".concat(n.msg,", 是否前往编辑存储源设置？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(e){"confirm"===e&&V.push("/admin/storage-edit/"+k)}}):B({type:"error",dangerouslyUseHTMLString:!0,grouping:!0,message:n.msg})}))};o((function(){_(k).then((function(e){F.value=e.data})),L()}));var H=t(),L=function(){b(k).then((function(e){e.data.type=e.data.type.key,H.value=e.data}))},W=t(),Y=function(e,n,l,a){a.preventDefault(),a.stopPropagation(),"allowAdmin"===n.property&&(e.allowAdmin=!e.allowAdmin),"allowAnonymous"===n.property&&(e.allowAnonymous=!e.allowAnonymous)},$=t(!1),J=u({get:function(){if(!F.value)return $.value=!1,!1;for(var e=0,n=0;n<F.value.length;n++)F.value[n].allowAdmin||e++;return e===F.value.length?($.value=!1,!1):0===e?($.value=!1,!0):($.value=!0,!1)},set:function(e){if(F.value)for(var n=0;n<F.value.length;n++)F.value[n].allowAdmin=e}}),K=t(!1),X=u({get:function(){if(!F.value)return K.value=!1,!1;for(var e=0,n=0;n<F.value.length;n++)F.value[n].allowAnonymous||e++;return e===F.value.length?(K.value=!1,!1):0===e?(K.value=!1,!0):(K.value=!0,!1)},set:function(e){if(F.value)for(var n=0;n<F.value.length;n++)F.value[n].allowAnonymous=e}});return function(e,n){var l,a=h,t=r("router-link"),o=S,u=T,j=I,b=z,_=x;return i(),c("div",N,[s("div",null,[s("div",P,[s("h3",Q,[d(t,{to:"/admin/storage-list"},{default:f((function(){return[d(a,{class:"my-auto h-full mr-2 cursor-pointer"})]})),_:1}),s("span",R,"存储源权限控制（"+m(null===(l=g(H))||void 0===l?void 0:l.name)+"）",1),n[5]||(n[5]=s("span",{class:"badge-blue"},"Pro",-1)),s("span",q,[n[3]||(n[3]=p("这个页面的功能已经废弃，已自动将数据迁移到 ")),d(t,{class:"text-blue-400",to:"/admin/user-list"},{default:f((function(){return n[2]||(n[2]=[p("用户管理")])})),_:1,__:[2]}),n[4]||(n[4]=p(" 中来配置权限。"))])])]),d(b,{ref_key:"tableRef",ref:W,onCellClick:Y,"class-name":"mt-8",data:g(F)},{default:f((function(){return[d(u,{align:"center","show-overflow-tooltip":"",prop:"operatorName",label:"操作"},{header:f((function(){return[n[7]||(n[7]=s("span",null,"操作",-1)),d(o,{placement:"right",width:"300",trigger:"hover"},{default:f((function(){return n[6]||(n[6]=[p(" 以下操作需要先在存储源打开"),s("b",null,"启用文件操作",-1),p("功能才可用，且会覆盖"),s("b",null,"允许匿名文件操作",-1),p("功能. ")])})),reference:f((function(){return[d(g(C),{class:"inline w-4 ml-1 -mt-0.5"})]})),_:1})]})),default:f((function(e){return[s("span",null,m(e.row.operatorName),1),d(o,{placement:"right",width:"300",trigger:"hover"},{default:f((function(){return[p(m(e.row.tips),1)]})),reference:f((function(){return[v(d(g(C),{class:"inline w-4 ml-1 -mt-0.5"},null,512),[[y,e.row.tips]])]})),_:2},1024)]})),_:1}),d(u,{align:"center",prop:"allowAdmin",label:"管理员"},{header:f((function(){return[s("div",D,[n[8]||(n[8]=s("span",{class:"relative -top-[2px]"},"管理员",-1)),d(j,{disabled:"",indeterminate:g($),modelValue:g(J),"onUpdate:modelValue":n[0]||(n[0]=function(e){return w(J)?J.value=e:null})},null,8,["indeterminate","modelValue"])])]})),default:f((function(e){return[d(j,{disabled:"",modelValue:e.row.allowAdmin,"onUpdate:modelValue":function(n){return e.row.allowAdmin=n}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),d(u,{align:"center",prop:"allowAnonymous",label:"匿名用户"},{header:f((function(){return[s("div",M,[n[9]||(n[9]=s("span",{class:"relative -top-[2px]"},"匿名用户",-1)),d(j,{disabled:"",indeterminate:g(K),modelValue:g(X),"onUpdate:modelValue":n[1]||(n[1]=function(e){return w(X)?X.value=e:null})},null,8,["indeterminate","modelValue"])])]})),default:f((function(e){return[d(j,{disabled:"",modelValue:e.row.allowAnonymous,"onUpdate:modelValue":function(n){return e.row.allowAnonymous=n}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["data"]),s("div",O,[n[11]||(n[11]=s("div",{class:"flex-1"},null,-1)),d(_,{type:"primary",disabled:"",onClick:G,icon:g(E)},{default:f((function(){return n[10]||(n[10]=[p("保存")])})),_:1,__:[10]},8,["icon"])])])])}}};"function"==typeof V&&V(F),e("default",k(F,[["__scopeId","data-v-1de60f1c"]]))}}}));
