System.register(["./index-legacy-e574cec8.js","./loading-legacy-2688a411.js","./form-item-legacy-de8da7e8.js","./input-legacy-bc871eba.js","./input-number-legacy-c1d86df3.js","./switch-legacy-a4b2d82c.js","./radio-legacy-bf353ae9.js","./popper-legacy-ef8fd66b.js","./popover-legacy-fa927888.js","./button-legacy-f53896dd.js","./admin-form-header-legacy-5b0f136c.js","./admin-user-legacy-034d5c87.js","./useAdminSetting-legacy-246910c5.js","./admin-storage-legacy-6381f83d.js","./route-block-legacy-509c7347.js","./index-legacy-47a1148a.js","./LinkIcon-legacy-ec966939.js","./CheckBadgeIcon-legacy-a01a5b9d.js","./request-legacy-61b983ae.js","./index-legacy-32709ede.js","./directive-legacy-64af483a.js","./index-legacy-c317e588.js","./_initCloneObject-legacy-b35b9836.js","./index-legacy-e86b74e4.js","./validator-legacy-a3ca6880.js","./index-legacy-b5baaeae.js","./vnode-legacy-bdad68af.js","./scroll-legacy-68db505b.js","./index-legacy-1ae34dc2.js","./dropdown-legacy-648534c2.js"],(function(e,n){"use strict";var l,o,t,i,a,u,r,c,d,s,f,m,g,p,v,_,x,h,V,y,w,L,b,j,H,U,k,C,A,Z,M,z,B,D,F,N;return{setters:[function(e){l=e.b,o=e.g,t=e.x,i=e.a3,a=e.r,u=e.B,r=e.o,c=e._,d=e.f,s=e.$,f=e.e,m=e.w,g=e.k,p=e.a1,v=e.a0,_=e.y,x=e.l},null,null,function(e){h=e.E,V=e.a},function(e){y=e.E},function(e){w=e.E},function(e){L=e.E,b=e.a},null,null,function(e){j=e.E},function(e){H=e._},function(e){U=e.g},function(e){k=e.u,C=e.f},function(e){A=e.l},function(e){Z=e.b},function(e){M=e.E},function(e){z=e.r},function(e){B=e.r},function(e){D=e.b},function(e){F=e.E},function(e){N=e.v},null,null,null,null,null,null,null,null,null],execute:function(){function n(e,n){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z","clip-rule":"evenodd"}),t("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})])}function E(e,n){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function S(e,n){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),t("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"})])}function T(e,n){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z","clip-rule":"evenodd"})])}function O(e,n){return l(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12.516 2.17a.75.75 0 0 0-1.032 0 11.209 11.209 0 0 1-7.877 3.08.75.75 0 0 0-.722.515A12.74 12.74 0 0 0 2.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 0 0 .374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 0 0-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08Zm3.094 8.016a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}var q={class:"mt-2"},I={class:"text-sm"},P={class:"mb-2"},Q={class:"text-red-500"},R={class:"flex justify-end"},W=e("default",{__name:"site-setting",setup:function(e){var o=i(),Z=a(),W=k(C,Z),G=W.siteSetting,Y=W.siteSettingLoading,$=W.saveData,J=W.saveLoading,K=a({siteName:[{required:!0,message:"请输入站点名称"}],faviconUrl:[{type:"url",message:"请输入正确的 favicon 地址，需以 http 或 https 开头"}]}),X=a({flag:!1,except:"",action:function(){}});u((function(){return Y.value}),(function(e,n){if(!0===n){var l=G.value.frontDomain,t=window.location.origin;""!==o.zfileConfig.baseUrl&&l!==t?(X.value.flag=!0,X.value.current=l,X.value.except=t,X.value.action=function(){G.value.frontDomain=t,$(),X.value.flag=!1}):""===o.zfileConfig.baseUrl&&l&&(X.value.flag=!0,X.value.current=l,X.value.except="空",X.value.action=function(){G.value.frontDomain="",$(),X.value.flag=!1})}})),r((function(){ne()}));var ee=c(),ne=function(){A().then((function(e){var n,l=null===(n=e.data)||void 0===n?void 0:n.length;l>0&&U({hideDisabledStorage:!0}).then((function(e){var n,o=e.data;o.length>0&&0===(null===(n=o[0].userStorageSourceList)||void 0===n?void 0:n.length)&&M.confirm("检测到你有 ".concat(l," 个存储源，但没有给管理员分配任何存储源，是否前往配置？（不配置将无法访问存储源）"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){ee.push("/admin/user-list")}))}))}))};return function(e,i){var a=H,u=D,r=h,c=j,U=F,k=L,C=b,A=w,M=y,W=V,Y=N;return d(G)?s((l(),f(W,{key:0,model:d(G),"label-width":d(o).adminForm.labelWidth,"label-position":d(o).adminForm.labelPosition,size:d(o).adminForm.size,"scroll-to-error":"","status-icon":"",class:"z-admin-form",ref_key:"settingFormRef",ref:Z,rules:d(K)},{default:m((function(){return[g(a,{title:"站点信息","sub-title":"请填写您的站点信息"}),g(r,{prop:"siteName",label:"站点名称"},{default:m((function(){return[g(u,{id:"siteName","prefix-icon":d(n),modelValue:d(G).siteName,"onUpdate:modelValue":i[0]||(i[0]=function(e){return d(G).siteName=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),g(r,{prop:"faviconUrl",label:"站点 favicon"},{default:m((function(){return[g(u,{id:"faviconUrl","prefix-icon":d(T),modelValue:d(G).faviconUrl,"onUpdate:modelValue":i[1]||(i[1]=function(e){return d(G).faviconUrl=e})},null,8,["prefix-icon","modelValue"]),i[11]||(i[11]=t("div",{class:"el-form-item-tips"},"网站在浏览器标题栏的 favicon 图标，需确保输入的地址没有 referer 防盗链，如修改后不生效请清理浏览器缓存或再试。 ",-1))]})),_:1,__:[11]}),s(g(r,{prop:"frontDomain",label:"前端站点域名"},{default:m((function(){return[g(u,{"prefix-icon":d(z),modelValue:d(G).frontDomain,"onUpdate:modelValue":i[2]||(i[2]=function(e){return d(G).frontDomain=e})},null,8,["prefix-icon","modelValue"]),i[16]||(i[16]=t("div",{class:"el-form-item-tips"},"前后端分离后，需配置此地址，用于访问未授权页面调回登录页、访问失效短链时调到 403 页面时确保跳转到前端服务的地址，不配置的话会跳转到后端地址 ",-1)),g(U,{placement:"right",width:400,trigger:"click"},{reference:m((function(){return[s(t("div",q,[i[12]||(i[12]=t("span",{class:"text-red-500 text-sm"},"设置异常，点击查看",-1)),g(d(E),{class:"inline w-5 text-red-500"})],512),[[p,d(X).flag]])]})),default:m((function(){return[t("div",I,[t("div",P,[i[13]||(i[13]=v("检测到设置异常，实际前端域名应为 ")),t("span",Q,_(d(X).except),1),i[14]||(i[14]=v("，是否需要修复？（不修正会影响 401、403、404 页面的跳转功能） "))]),t("div",R,[g(c,{size:"small",type:"warning",icon:d(B),onClick:d(X).action},{default:m((function(){return i[15]||(i[15]=[v(" 自动修正 ")])})),_:1,__:[15]},8,["icon","onClick"])])])]})),_:1})]})),_:1,__:[16]},512),[[p,d(o).zfileConfig.baseUrl||d(G).frontDomain]]),g(r,{prop:"siteHomeName",label:"根路径名称"},{default:m((function(){return[g(u,{id:"siteHomeName","prefix-icon":d(S),modelValue:d(G).siteHomeName,"onUpdate:modelValue":i[3]||(i[3]=function(e){return d(G).siteHomeName=e})},null,8,["prefix-icon","modelValue"]),i[17]||(i[17]=t("div",{class:"el-form-item-tips"},"用于设置首页上方面包屑根目录的默认名称.",-1))]})),_:1,__:[17]}),g(r,{prop:"siteHomeLogo",label:"首页 Logo 图片地址"},{default:m((function(){return[g(u,{id:"siteHomeLogo","prefix-icon":d(T),modelValue:d(G).siteHomeLogo,"onUpdate:modelValue":i[4]||(i[4]=function(e){return d(G).siteHomeLogo=e})},null,8,["prefix-icon","modelValue"]),i[18]||(i[18]=t("div",{class:"el-form-item-tips"},"用于设置首页上面包屑左侧 Logo，留空为不显示，会自动居中显示，如有需要可通过自定义 css 来修改默认样式, logo 元素的 id 为 zfile-home-logo ",-1))]})),_:1,__:[18]}),g(r,{prop:"siteHomeLogoLink",label:"首页 Logo 打开链接"},{default:m((function(){return[g(u,{disabled:!d(G).siteHomeLogo,id:"siteHomeLogoLink","prefix-icon":d(z),modelValue:d(G).siteHomeLogoLink,"onUpdate:modelValue":i[5]||(i[5]=function(e){return d(G).siteHomeLogoLink=e})},null,8,["disabled","prefix-icon","modelValue"]),i[19]||(i[19]=t("div",{class:"el-form-item-tips"},"点击 Logo 链接后打开的地址，为空则点击不进行任何跳转",-1))]})),_:1,__:[19]}),g(r,{prop:"siteHomeLogoTargetMode",label:"首页 Logo 链接打开方式"},{default:m((function(){return[g(C,{modelValue:d(G).siteHomeLogoTargetMode,"onUpdate:modelValue":i[6]||(i[6]=function(e){return d(G).siteHomeLogoTargetMode=e})},{default:m((function(){return[g(k,{value:"_blank"},{default:m((function(){return i[20]||(i[20]=[v("新标签打开")])})),_:1,__:[20]}),g(k,{value:"_self"},{default:m((function(){return i[21]||(i[21]=[v("当前页面打开")])})),_:1,__:[21]})]})),_:1},8,["modelValue"])]})),_:1}),g(r,{prop:"siteAdminLogoTargetMode",label:"管理员页面 logo 链接打开方式"},{default:m((function(){return[g(C,{modelValue:d(G).siteAdminLogoTargetMode,"onUpdate:modelValue":i[7]||(i[7]=function(e){return d(G).siteAdminLogoTargetMode=e})},{default:m((function(){return[g(k,{value:"_blank"},{default:m((function(){return i[22]||(i[22]=[v("新标签打开")])})),_:1,__:[22]}),g(k,{value:"_self"},{default:m((function(){return i[23]||(i[23]=[v("当前页面打开")])})),_:1,__:[23]})]})),_:1},8,["modelValue"]),i[24]||(i[24]=t("div",{class:"el-form-item-tips"},"管理员页面左上角的 ZFile Logo 点击会回到首页",-1))]})),_:1,__:[24]}),g(r,{prop:"siteAdminVersionOpenChangeLog",label:"管理员页面点击版本号打开更新日志"},{default:m((function(){return[g(A,{modelValue:d(G).siteAdminVersionOpenChangeLog,"onUpdate:modelValue":i[8]||(i[8]=function(e){return d(G).siteAdminVersionOpenChangeLog=e})},null,8,["modelValue"])]})),_:1}),g(r,{label:"备案号"},{default:m((function(){return[g(u,{id:"icp","prefix-icon":d(O),modelValue:d(G).icp,"onUpdate:modelValue":i[9]||(i[9]=function(e){return d(G).icp=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),g(r,{label:"最大同时上传文件数"},{default:m((function(){return[g(M,{id:"maxFileUploads",modelValue:d(G).maxFileUploads,"onUpdate:modelValue":i[10]||(i[10]=function(e){return d(G).maxFileUploads=e}),min:1,max:99},null,8,["modelValue"])]})),_:1}),g(r,{class:"admin-from-footer"},{default:m((function(){return[g(c,{class:"ml-auto",type:"primary",icon:d(B),onClick:d($)},{default:m((function(){return i[25]||(i[25]=[v("保存设置")])})),_:1,__:[25]},8,["icon","onClick"])]})),_:1})]})),_:1},8,["model","label-width","label-position","size","rules"])),[[Y,d(J)]]):x("",!0)}}});"function"==typeof Z&&Z(W)}}}));
