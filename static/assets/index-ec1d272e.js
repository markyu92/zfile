import{a3 as W,_ as X,a4 as Y,r as E,o as Z,ak as ee,b as p,g as S,k as e,w as o,f as t,al as oe,am as te,an as ae,a0 as m,x as c,$ as ne,e as b,y as g,F as re,G as le}from"./index-008199ed.js";/* empty css                */import{_ as se,a as ie}from"./el-table-column-plus-be255135.js";import{E as me}from"./popconfirm-dacced9d.js";/* empty css               *//* empty css                */import{E as de}from"./button-30635c71.js";import{_ as pe}from"./rename-outline-9169668c.js";import{E as ue}from"./switch-6e3117dc.js";import"./tooltip-4ed993c7.js";/* empty css            *//* empty css                  */import{E as ce}from"./row-5d0d9aad.js";import{E as _e,_ as fe}from"./col-abb40228.js";import{E as be,a as ge}from"./select-275ec4c7.js";/* empty css                  */import{E as he,a as we}from"./input-73d413ba.js";import{_ as ke}from"./admin-form-header-819a5389.js";import{g as Ee,d as Se,u as ve}from"./admin-user-8224dae0.js";import{u as ye,U as ze}from"./index-4a6553a1.js";import{b as F}from"./route-block-83d24a4e.js";import{r as Ce}from"./MagnifyingGlassIcon-c7e26493.js";import{r as Ve}from"./ArrowPathIcon-f6c0972c.js";import{r as Ue}from"./PlusIcon-76caf486.js";import{r as xe}from"./ClipboardDocumentIcon-6b97f9b9.js";import{r as Fe}from"./TrashIcon-6780b292.js";import{E as v,b as $e}from"./request-7014ab81.js";import{E as De}from"./index-dc7d0be4.js";import{E as Te}from"./index-60380bfa.js";import{E as Le}from"./index-751f7128.js";import{v as Re}from"./directive-20abcd4b.js";import"./index-91840f01.js";import"./index-0da14aee.js";import"./index-4ea0a277.js";import"./_initCloneObject-ffec0ace.js";import"./index-293710b7.js";import"./debounce-3f0c1a7c.js";import"./index-680901bf.js";import"./validator-38288ad7.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./dayjs.min-3b74a704.js";import"./index-3c7e69e5.js";import"./strings-535b4609.js";import"./scroll-374ad3fb.js";import"./vnode-5e2fd68e.js";import"./dialog-9877e468.js";import"./index-8286893b.js";import"./overlay-64b24548.js";import"./refs-9142934b.js";import"./dropdown-40114633.js";const Ie={class:"z-admin-table-tools"},Be={class:"flex justify-between space-x-2"},Pe={class:"space-y-2"},Ne={class:"font-bold"},qe={class:"space-x-2"},y=1,Ae=2,Ge=0,Me={__name:"index",setup(je){const s=W(),{openDialog:$}=ye();let D=X();const r=Y({username:"",nickname:"",enable:null,dateFrom:"",dateTo:"",sortField:"id",sortAsc:!0,hideDisabledStorage:!0}),h=E(!1),z=E([]),_=()=>{h.value=!0,Ee(r).then(l=>{z.value=l.data}).finally(()=>{h.value=!1})},T=l=>{r.sortField=l.prop,r.sortAsc=l.order==="ascending",_()};Z(()=>{_()});const L=()=>{D.push("/admin/user-edit")},R=l=>{Se(l).then(n=>{v.success("删除成功"),_()})},I=l=>{if(l.id===y){v.warning("管理员账号不允许禁用"),l.enable=!0;return}ve(l.id,l.enable).then(n=>{v.success("修改成功")})},C=E(),B=()=>{C.value.resetFields()};return(l,n)=>{const P=ke,V=$e,w=he,f=_e,U=be,N=ge,q=fe,k=de,A=ce,G=we,d=se,u=De,x=Te,M=Le,j=ue,O=pe,H=ee("router-link"),J=me,K=ie,Q=Re;return p(),S("div",null,[e(P,{"hide-bottom-border":"",title:"用户管理"}),e(G,{inline:"",class:"z-admin-search-from",size:t(s).adminSearch.size,"label-width":"80","label-position":t(s).adminSearch.labelPosition,ref_key:"searchFormRef",ref:C,model:t(r)},{default:o(()=>[e(A,{class:"z-admin-search-from-row",gutter:20},{default:o(()=>[e(f,{span:t(s).adminSearch.spanSize},{default:o(()=>[e(w,{label:"用户名",prop:"username"},{default:o(()=>[e(V,{modelValue:t(r).username,"onUpdate:modelValue":n[0]||(n[0]=a=>t(r).username=a),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),e(f,{span:t(s).adminSearch.spanSize},{default:o(()=>[e(w,{label:"昵称",prop:"nickname"},{default:o(()=>[e(V,{modelValue:t(r).nickname,"onUpdate:modelValue":n[1]||(n[1]=a=>t(r).nickname=a),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["span"]),e(f,{span:t(s).adminSearch.spanSize},{default:o(()=>[e(w,{label:"启用状态",prop:"enable"},{default:o(()=>[e(N,{modelValue:t(r).enable,"onUpdate:modelValue":n[2]||(n[2]=a=>t(r).enable=a),clearable:"",placeholder:"请选择"},{default:o(()=>[e(U,{label:"启用",value:!0}),e(U,{label:"禁用",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["span"]),e(f,{span:t(s).adminSearch.spanSize},{default:o(()=>[e(w,{label:"创建时间",prop:"searchDate"},{default:o(()=>[e(q,{editable:!1,shortcuts:t(oe),modelValue:t(r).searchDate,"onUpdate:modelValue":n[3]||(n[3]=a=>t(r).searchDate=a),type:"daterange","value-format":t(te),"default-time":t(ae),"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["shortcuts","modelValue","value-format","default-time"])]),_:1})]),_:1},8,["span"]),e(f,{span:t(s).adminSearch.spanSize},{default:o(()=>[e(k,{type:"primary",icon:t(Ce),loading:t(h),onClick:_},{default:o(()=>n[4]||(n[4]=[m(" 查询 ")])),_:1,__:[4]},8,["icon","loading"]),e(k,{icon:t(Ve),onClick:B},{default:o(()=>n[5]||(n[5]=[m("重置")])),_:1,__:[5]},8,["icon"])]),_:1},8,["span"])]),_:1})]),_:1},8,["size","label-position","model"]),c("div",Ie,[e(k,{onClick:L,size:t(s).adminTable.size,icon:t(Ue),type:"primary"},null,8,["size","icon"])]),ne((p(),b(K,{border:"",size:t(s).adminTable.size,data:t(z),onSortChange:T,"default-sort":{prop:"id",order:"ascending"}},{default:o(()=>[e(d,{sortable:"custom",align:"center",type:"selection"}),e(d,{sortable:"custom",align:"center",width:"75",prop:"id",label:"ID"}),e(d,{sortable:"custom","min-width":"200px",prop:"username",label:"用户名"},{default:o(a=>[c("div",Be,[c("span",null,g(a.row.username),1),c("span",null,[a.row.id===Ge?(p(),b(x,{key:0,content:"表示单点登录新用户或新注册用户默认的权限，如果关闭右侧的启用状态表示不允许新用户注册/单点登录新用户"},{default:o(()=>[e(u,{effect:"dark",type:"info"},{default:o(()=>n[6]||(n[6]=[m("虚拟新用户")])),_:1,__:[6]})]),_:1})):a.row.id===y?(p(),b(u,{key:1,effect:"dark"},{default:o(()=>n[7]||(n[7]=[m("管理员")])),_:1,__:[7]})):a.row.id===Ae?(p(),b(u,{key:2,effect:"dark",type:"success"},{default:o(()=>n[8]||(n[8]=[m("匿名用户")])),_:1,__:[8]})):(p(),b(u,{key:3},{default:o(()=>n[9]||(n[9]=[m("普通用户")])),_:1,__:[9]}))])])]),_:1}),e(d,{width:"120",prop:"nickname",label:"昵称"}),e(d,{width:"120","show-overflow-tooltip":"",align:"center",label:"存储源列表"},{default:o(a=>[e(M,{disabled:a.row.userStorageSourceList.length===0,placement:"left",width:300},{reference:o(()=>[e(u,{effect:"dark"},{default:o(()=>[m(g(a.row.userStorageSourceList.length)+" 个",1)]),_:2},1024)]),default:o(()=>[c("div",Pe,[(p(!0),S(re,null,le(a.row.userStorageSourceList,i=>(p(),S("div",{class:"space-x-2",key:i.id},[c("span",Ne,g(i.storageSourceName),1),e(u,null,{default:o(()=>[m(g(i.storageSourceType.description),1)]),_:2},1024),e(u,null,{default:o(()=>[m(g(i.rootPath),1)]),_:2},1024)]))),128))])]),_:2},1032,["disabled"])]),_:1}),e(d,{sortable:"custom",align:"center","header-align":"center",width:"115",prop:"enable",label:"启用状态"},{default:o(a=>[e(j,{modelValue:a.row.enable,"onUpdate:modelValue":i=>a.row.enable=i,disabled:a.row.id===y,onChange:i=>I(a.row)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),e(d,{sortable:"custom",width:"175",align:"center",prop:"createTime",label:"创建时间"}),e(d,{width:"90",align:"center",label:"操作"},{default:o(a=>[c("div",qe,[e(H,{to:"/admin/user-edit/".concat(a.row.id)},{default:o(()=>[e(O,{class:"z-btn-primary"})]),_:2},1032,["to"]),e(x,{content:"复制"},{default:o(()=>[e(t(xe),{onClick:i=>t($)(a.row),class:"z-btn-primary"},null,8,["onClick"])]),_:2},1024),e(J,{title:"是否确认删除?","confirm-button-text":"是","cancel-button-text":"否",onConfirm:i=>R(a.row.id)},{reference:o(()=>[e(t(Fe),{class:"z-btn-danger"})]),_:2},1032,["onConfirm"])])]),_:1})]),_:1},8,["size","data"])),[[Q,t(h)]]),e(ze,{onClose:_})])}}};typeof F=="function"&&F(Me);export{Me as default};
