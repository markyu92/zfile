import{t as Y,_ as le,E as I,n as ge,o as _e,e as Ce,A as z,H as Ne,U as re}from"./index-4ea0a277.js";import{m as ie,n as Q,p as Te,q as Pe}from"./request-7014ab81.js";import{s as Ee,ac as we,p as U,q as Z,d as V,Q as ee,a as K,r as T,B as L,ad as te,U as $e,b as ce,g as ue,h as de,f as O,n as Se,as as ae,c as M,o as be,aE as xe,k as d,V as Be,j as X,D as se,v as ke,C as Oe,aA as Re,aF as ne,a4 as ze,aG as Ae,$ as Fe,a1 as Le,l as Ve,m as Me,J as De}from"./index-008199ed.js";import{c as A}from"./strings-535b4609.js";import{f as Ie}from"./vnode-5e2fd68e.js";const Ue=(e,o,b)=>Ie(e.subTree).filter(s=>{var u;return we(s)&&((u=s.type)==null?void 0:u.name)===o&&!!s.component}).map(s=>s.component.uid).map(s=>b[s]).filter(s=>!!s),Ke=(e,o)=>{const b={},v=Ee([]);return{children:v,addChild:u=>{b[u.uid]=u,v.value=Ue(e,o,b)},removeChild:u=>{delete b[u],v.value=v.value.filter(f=>f.uid!==u)}}},q=Symbol("tabsRootContextKey"),qe=U({tabs:{type:Z(Array),default:()=>ie([])}}),ve="ElTabBar",He=V({name:ve}),We=V({...He,props:qe,setup(e,{expose:o}){const b=e,v=ae(),t=ee(q);t||Y(ve,"<el-tabs><el-tab-bar /></el-tabs>");const s=K("tabs"),u=T(),f=T(),h=()=>{let r=0,_=0;const m=["top","bottom"].includes(t.props.tabPosition)?"width":"height",k=m==="width"?"x":"y",n=k==="x"?"left":"top";return b.tabs.every($=>{var P,x;const C=(x=(P=v.parent)==null?void 0:P.refs)==null?void 0:x["tab-".concat($.uid)];if(!C)return!1;if(!$.active)return!0;r=C["offset".concat(A(n))],_=C["client".concat(A(m))];const S=window.getComputedStyle(C);return m==="width"&&(_-=Number.parseFloat(S.paddingLeft)+Number.parseFloat(S.paddingRight),r+=Number.parseFloat(S.paddingLeft)),!1}),{[m]:"".concat(_,"px"),transform:"translate".concat(A(k),"(").concat(r,"px)")}},N=()=>f.value=h(),y=[],i=()=>{var r;y.forEach(m=>m.stop()),y.length=0;const _=(r=v.parent)==null?void 0:r.refs;if(_){for(const m in _)if(m.startsWith("tab-")){const k=_[m];k&&y.push(Q(k,N))}}};L(()=>b.tabs,async()=>{await te(),N(),i()},{immediate:!0});const p=Q(u,()=>N());return $e(()=>{y.forEach(r=>r.stop()),y.length=0,p.stop()}),o({ref:u,update:N}),(r,_)=>(ce(),ue("div",{ref_key:"barRef",ref:u,class:de([O(s).e("active-bar"),O(s).is(O(t).props.tabPosition)]),style:Se(f.value)},null,6))}});var je=le(We,[["__file","tab-bar.vue"]]);const Ge=U({panes:{type:Z(Array),default:()=>ie([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Je={tabClick:(e,o,b)=>b instanceof Event,tabRemove:(e,o)=>o instanceof Event},oe="ElTabNav",Qe=V({name:oe,props:Ge,emits:Je,setup(e,{expose:o,emit:b}){const v=ee(q);v||Y(oe,"<el-tabs><tab-nav /></el-tabs>");const t=K("tabs"),s=Te(),u=Pe(),f=T(),h=T(),N=T(),y=T(),i=T(!1),p=T(0),r=T(!1),_=T(!0),m=M(()=>["top","bottom"].includes(v.props.tabPosition)?"width":"height"),k=M(()=>{const l=m.value==="width"?"X":"Y";return{transform:"translate".concat(l,"(-").concat(p.value,"px)")}}),n=()=>{if(!f.value)return;const l=f.value["offset".concat(A(m.value))],c=p.value;if(!c)return;const a=c>l?c-l:0;p.value=a},$=()=>{if(!f.value||!h.value)return;const l=h.value["offset".concat(A(m.value))],c=f.value["offset".concat(A(m.value))],a=p.value;if(l-a<=c)return;const E=l-a>c*2?a+c:l-c;p.value=E},P=async()=>{const l=h.value;if(!i.value||!N.value||!f.value||!l)return;await te();const c=N.value.querySelector(".is-active");if(!c)return;const a=f.value,E=["top","bottom"].includes(v.props.tabPosition),g=c.getBoundingClientRect(),w=a.getBoundingClientRect(),D=E?l.offsetWidth-w.width:l.offsetHeight-w.height,R=p.value;let B=R;E?(g.left<w.left&&(B=R-(w.left-g.left)),g.right>w.right&&(B=R+g.right-w.right)):(g.top<w.top&&(B=R-(w.top-g.top)),g.bottom>w.bottom&&(B=R+(g.bottom-w.bottom))),B=Math.max(B,0),p.value=Math.min(B,D)},x=()=>{var l;if(!h.value||!f.value)return;e.stretch&&((l=y.value)==null||l.update());const c=h.value["offset".concat(A(m.value))],a=f.value["offset".concat(A(m.value))],E=p.value;a<c?(i.value=i.value||{},i.value.prev=E,i.value.next=E+a<c,c-E<a&&(p.value=c-a)):(i.value=!1,E>0&&(p.value=0))},C=l=>{let c=0;switch(l.code){case z.left:case z.up:c=-1;break;case z.right:case z.down:c=1;break;default:return}const a=Array.from(l.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let g=a.indexOf(l.target)+c;g<0?g=a.length-1:g>=a.length&&(g=0),a[g].focus({preventScroll:!0}),a[g].click(),S()},S=()=>{_.value&&(r.value=!0)},H=()=>r.value=!1;return L(s,l=>{l==="hidden"?_.value=!1:l==="visible"&&setTimeout(()=>_.value=!0,50)}),L(u,l=>{l?setTimeout(()=>_.value=!0,50):_.value=!1}),Q(N,x),be(()=>setTimeout(()=>P(),0)),xe(()=>x()),o({scrollToActiveTab:P,removeFocus:H,tabListRef:h,tabBarRef:y}),()=>{const l=i.value?[d("span",{class:[t.e("nav-prev"),t.is("disabled",!i.value.prev)],onClick:n},[d(I,null,{default:()=>[d(ge,null,null)]})]),d("span",{class:[t.e("nav-next"),t.is("disabled",!i.value.next)],onClick:$},[d(I,null,{default:()=>[d(_e,null,null)]})])]:null,c=e.panes.map((a,E)=>{var g,w,D,R;const B=a.uid,W=a.props.disabled,j=(w=(g=a.props.name)!=null?g:a.index)!=null?w:"".concat(E),G=!W&&(a.isClosable||e.editable);a.index="".concat(E);const me=G?d(I,{class:"is-icon-close",onClick:F=>b("tabRemove",a,F)},{default:()=>[d(Ce,null,null)]}):null,he=((R=(D=a.slots).label)==null?void 0:R.call(D))||a.props.label,ye=!W&&a.active?0:-1;return d("div",{ref:"tab-".concat(B),class:[t.e("item"),t.is(v.props.tabPosition),t.is("active",a.active),t.is("disabled",W),t.is("closable",G),t.is("focus",r.value)],id:"tab-".concat(j),key:"tab-".concat(B),"aria-controls":"pane-".concat(j),role:"tab","aria-selected":a.active,tabindex:ye,onFocus:()=>S(),onBlur:()=>H(),onClick:F=>{H(),b("tabClick",a,j,F)},onKeydown:F=>{G&&(F.code===z.delete||F.code===z.backspace)&&b("tabRemove",a,F)}},[he,me])});return d("div",{ref:N,class:[t.e("nav-wrap"),t.is("scrollable",!!i.value),t.is(v.props.tabPosition)]},[l,d("div",{class:t.e("nav-scroll"),ref:f},[d("div",{class:[t.e("nav"),t.is(v.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(v.props.tabPosition))],ref:h,style:k.value,role:"tablist",onKeydown:C},[e.type?null:d(je,{ref:y,tabs:[...e.panes]},null),c])])])}}}),Xe=U({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Z(Function),default:()=>!0},stretch:Boolean}),J=e=>ke(e)||Oe(e),Ye={[re]:e=>J(e),tabClick:(e,o)=>o instanceof Event,tabChange:e=>J(e),edit:(e,o)=>["remove","add"].includes(o),tabRemove:e=>J(e),tabAdd:()=>!0},Ze=V({name:"ElTabs",props:Xe,emits:Ye,setup(e,{emit:o,slots:b,expose:v}){var t;const s=K("tabs"),u=M(()=>["left","right"].includes(e.tabPosition)),{children:f,addChild:h,removeChild:N}=Ke(ae(),"ElTabPane"),y=T(),i=T((t=e.modelValue)!=null?t:"0"),p=async(n,$=!1)=>{var P,x;if(!(i.value===n||se(n)))try{let C;if(e.beforeLeave){const S=e.beforeLeave(n,i.value);C=S instanceof Promise?await S:S}else C=!0;C!==!1&&(i.value=n,$&&(o(re,n),o("tabChange",n)),(x=(P=y.value)==null?void 0:P.removeFocus)==null||x.call(P))}catch(C){}},r=(n,$,P)=>{n.props.disabled||(o("tabClick",n,P),p($,!0))},_=(n,$)=>{n.props.disabled||se(n.props.name)||($.stopPropagation(),o("edit",n.props.name,"remove"),o("tabRemove",n.props.name))},m=()=>{o("edit",void 0,"add"),o("tabAdd")};L(()=>e.modelValue,n=>p(n)),L(i,async()=>{var n;await te(),(n=y.value)==null||n.scrollToActiveTab()}),Be(q,{props:e,currentName:i,registerPane:n=>{f.value.push(n)},sortPane:h,unregisterPane:N}),v({currentName:i,tabNavRef:y});const k=({render:n})=>n();return()=>{const n=b["add-icon"],$=e.editable||e.addable?d("div",{class:[s.e("new-tab"),u.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:C=>{[z.enter,z.numpadEnter].includes(C.code)&&m()}},[n?X(b,"add-icon"):d(I,{class:s.is("icon-plus")},{default:()=>[d(Ne,null,null)]})]):null,P=d("div",{class:[s.e("header"),u.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[d(k,{render:()=>{const C=f.value.some(S=>S.slots.label);return d(Qe,{ref:y,currentName:i.value,editable:e.editable,type:e.type,panes:f.value,stretch:e.stretch,onTabClick:r,onTabRemove:_},{$stable:!C})}},null),$]),x=d("div",{class:s.e("content")},[X(b,"default")]);return d("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}]},[x,P])}}});var et=Ze;const tt=U({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fe="ElTabPane",at=V({name:fe}),st=V({...at,props:tt,setup(e){const o=e,b=ae(),v=Re(),t=ee(q);t||Y(fe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=K("tab-pane"),u=T(),f=M(()=>o.closable||t.props.closable),h=ne(()=>{var r;return t.currentName.value===((r=o.name)!=null?r:u.value)}),N=T(h.value),y=M(()=>{var r;return(r=o.name)!=null?r:u.value}),i=ne(()=>!o.lazy||N.value||h.value);L(h,r=>{r&&(N.value=!0)});const p=ze({uid:b.uid,slots:v,props:o,paneName:y,active:h,index:u,isClosable:f});return t.registerPane(p),be(()=>{t.sortPane(p)}),Ae(()=>{t.unregisterPane(p.uid)}),(r,_)=>O(i)?Fe((ce(),ue("div",{key:0,id:"pane-".concat(O(y)),class:de(O(s).b()),role:"tabpanel","aria-hidden":!O(h),"aria-labelledby":"tab-".concat(O(y))},[X(r.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Le,O(h)]]):Ve("v-if",!0)}});var pe=le(st,[["__file","tab-pane.vue"]]);const ct=Me(et,{TabPane:pe}),ut=De(pe);export{ut as E,ct as a};
