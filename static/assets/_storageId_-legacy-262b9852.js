System.register(["./index-legacy-e574cec8.js","./loading-legacy-2688a411.js","./el-table-column-plus-legacy-a2eac651.js","./button-legacy-f53896dd.js","./input-legacy-bc871eba.js","./Cancel-legacy-ab83e01a.js","./alert-legacy-3cfbcde8.js","./admin-storage-legacy-6381f83d.js","./sortable.esm-legacy-9b05e4a7.js","./base-legacy-173045dc.js","./request-legacy-61b983ae.js","./index-legacy-47a1148a.js","./route-block-legacy-509c7347.js","./_plugin-vue_export-helper-legacy-8fcf0e06.js","./FolderIcon-legacy-f2907149.js","./KeyIcon-legacy-3346e3e2.js","./ArrowUpIcon-legacy-896909a5.js","./TrashIcon-legacy-3360f913.js","./PlusIcon-legacy-2c71b691.js","./CheckBadgeIcon-legacy-a01a5b9d.js","./directive-legacy-64af483a.js","./index-legacy-69b9ad2b.js","./index-legacy-ea3d196e.js","./index-legacy-c317e588.js","./index-legacy-1ae34dc2.js","./_initCloneObject-legacy-b35b9836.js","./index-legacy-d493f4b0.js","./debounce-legacy-321ba92e.js","./index-legacy-693c88b9.js","./admin-form-header-legacy-5b0f136c.js","./arrow-left-legacy-eb9efd7f.js","./index-legacy-b5baaeae.js","./vnode-legacy-bdad68af.js","./scroll-legacy-68db505b.js","./validator-legacy-a3ca6880.js"],(function(e,n){"use strict";var l,a,t,i,o,c,r,s,d,u,f,p,m,g,v,y,b,h,w,x,_,j,k,I,C,z,V,U,D,E,$,T,q,A,B,G,S,F,O,P,W;return{setters:[function(e){l=e.r,a=e.a3,t=e.Y,i=e._,o=e.o,c=e.b,r=e.g,s=e.k,d=e.w,u=e.x,f=e.a0,p=e.f,m=e.$,g=e.e,v=e.aj,y=e.l},null,function(e){b=e._,h=e.a},function(e){w=e.E},null,function(e){x=e._},function(e){_=e.E},function(e){j=e.n,k=e.o,I=e.j},function(e){C=e.S},function(e){z=e.i},function(e){V=e.E,U=e.b},function(e){D=e.E},function(e){E=e.b},function(e){$=e._},function(e){T=e.r,q=e.a,A=e.b},function(e){B=e.r},function(e){G=e.r,S=e.a},function(e){F=e.r},function(e){O=e.r},function(e){P=e.r},function(e){W=e.v},null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var n=document.createElement("style");n.textContent=".zfile-admin-password-body[data-v-d3c0e0f4] .el-form-sub-title{max-width:100%}.zfile-admin-password-body .rules-tips[data-v-d3c0e0f4]{padding:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:700}.zfile-admin-password-body .rules-tips-link[data-v-d3c0e0f4]{margin-top:.5rem}.zfile-admin-password-body .rules-tips-link[data-v-d3c0e0f4]>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.25rem * var(--tw-space-x-reverse));margin-left:calc(1.25rem * calc(1 - var(--tw-space-x-reverse)))}.zfile-admin-password-body .rules-tips-link svg[data-v-d3c0e0f4]{height:1rem;line-height:1.25rem;vertical-align:text-bottom}.el-table[data-v-d3c0e0f4] .cell{padding-right:.5rem;padding-left:0}.el-table[data-v-d3c0e0f4] .el-table__row{height:4rem}.el-table[data-v-d3c0e0f4] .el-table__row:last-child .el-table__cell{border-bottom-width:0px}.el-table[data-v-d3c0e0f4] .el-table__inner-wrapper:before{content:none}.add-more-btn[data-v-d3c0e0f4]{margin-bottom:.5rem;width:100%;border-style:dashed}@media not all and (min-width: 768px){.add-more-btn[data-v-d3c0e0f4]{margin-top:.5rem}}.save-btn[data-v-d3c0e0f4]{display:-webkit-box;display:flex}.save-btn .el-button[data-v-d3c0e0f4]{margin-left:auto}\n",document.head.appendChild(n);var Y=l([]),K=l(!1);function M(e,n){var l=n.params.storageId,a=function(){var e=document.querySelectorAll(".el-table__body-wrapper table > tbody")[0];e&&C.create(e,{filter:".el-button",onEnd:function(e){if(e.oldIndex!==e.newIndex){var n=Y.value.splice(e.oldIndex,1)[0];Y.value.splice(e.newIndex,0,n)}}})},t=function(){Y.value.push({description:"表达式 - "+(Y.value.length+1),expression:"",password:"",storageId:l})};return{loading:K,loadData:function(){j(l).then((function(e){Y.value=e.data,0===Y.value.length&&t(),a()}))},list:Y,addItem:t,deleteItem:function(e){Y.value.splice(e,1)},moveUp:function(e){if(0!==e){var n=Y.value[e];Y.value.splice(e,1),Y.value.splice(e-1,0,n)}},moveDown:function(e){if(e!==Y.value.length-1){var n=Y.value[e];Y.value.splice(e,1),Y.value.splice(e+1,0,n)}},saveData:function(){if(!Y.value.find((function(e){if(z(e.description)||z(e.expression)||z(e.password))return V.warning("请检查数据填写是否完整"),!0}))){K.value=!0;for(var n=0;n<Y.value.length;n++)Y.value[n].id=n+1;k(l,Y.value).then((function(){D.confirm("保存成功, 是否返回存储源列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(n){"confirm"===n&&e.push("/admin/storage-list")}})})).finally((function(){K.value=!1}))}}}}var N={class:"zfile-admin-password-body"},Q={class:"rules-tips-link"},R={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},X={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},Z={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},H={class:"save-btn"},J={__name:"[storageId]",props:{storageId:{type:Number,required:!1}},setup:function(e){var n=a(),j=t(),k=M(i(),j),C=k.loading,z=k.loadData,V=k.list,D=k.addItem,E=k.deleteItem,$=k.moveDown,Y=k.moveUp,K=k.saveData;o((function(){z(),L()}));var J=l(),L=function(){I(j.params.storageId).then((function(e){e.data.type=e.data.type.key,J.value=e.data}))};return function(e,l){var a,t=_,i=x,o=b,j=U,k=w,I=h,z=W;return c(),r("div",N,[s(i,{to:"/admin/storage-list",title:"密码文件夹（"+(null===(a=p(J))||void 0===a?void 0:a.name)+"）"},{default:d((function(){return[s(t,{closable:!1,type:"info"},{default:d((function(){return[l[3]||(l[3]=u("div",{class:"rules-tips"},"Glob 表达式规则：",-1)),l[4]||(l[4]=u("div",{class:"rules-tips"},[u("b",null,"单层根目录加密"),f(": 如 "),u("span",{class:"select-all code"},"/"),f(" 表示根路径下需要密码访问.")],-1)),l[5]||(l[5]=u("div",{class:"rules-tips"},[u("b",null,"单层子目录加密"),f(": 如 "),u("span",{class:"select-all code"},"/music/*"),f(" 表示根目录下的 music 文件夹需要密码访问, 子文件夹不加密.")],-1)),l[6]||(l[6]=u("div",{class:"rules-tips"},[u("b",null,"嵌套子目录加密"),f(": 如 "),u("span",{class:"select-all code"},"/music/**"),f(" 表示根目录下的 music 文件夹及其所有子文件夹都需要密码访问.")],-1)),l[7]||(l[7]=u("div",{class:"rules-tips"},"注：系统匹配到第一个符合的规则就会取密码进行校验，并返回结果，所以请调整好规则顺序，下方规则可进行拖拽排序。",-1)),u("div",Q,[u("a",R,[s(p(T),{class:"inline mr-1"}),l[0]||(l[0]=u("span",null,"参考文章 (Wikipedia)",-1))]),u("a",X,[s(p(T),{class:"inline mr-1"}),l[1]||(l[1]=f("参考文章 (阮一峰)"))]),u("a",Z,[s(p(T),{class:"inline mr-1"}),l[2]||(l[2]=f("参考文章 (Github)"))])])]})),_:1,__:[3,4,5,6,7]})]})),_:1},8,["title"]),m((c(),g(I,{size:p(n).adminTable.size,"row-key":"id",data:p(V)},{default:d((function(){return[p(v)?(c(),g(o,{key:0,label:"ID",prop:"id"})):y("",!0),s(o,{label:"描述",prop:"description"},{default:d((function(e){return[s(j,{"prefix-icon":p(q),placeholder:"请输入表达式描述",modelValue:e.row.description,"onUpdate:modelValue":function(n){return e.row.description=n}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]})),_:1}),s(o,{label:"表达式",prop:"expression"},{default:d((function(e){return[s(j,{"prefix-icon":p(A),placeholder:"请输入表达式",modelValue:e.row.expression,"onUpdate:modelValue":function(n){return e.row.expression=n},modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]})),_:1}),s(o,{label:"密码",width:"200",prop:"password"},{default:d((function(e){return[s(j,{"prefix-icon":p(B),placeholder:"请输入密码",type:"password","show-password":"",modelValue:e.row.password,"onUpdate:modelValue":function(n){return e.row.password=n}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]})),_:1}),s(o,{align:"center",label:"操作",width:"60px"},{default:d((function(e){return[p(v)&&0!==e.$index?(c(),g(k,{key:0,type:"primary",onClick:function(n){return p(Y)(e.$index)},icon:p(G)},null,8,["onClick","icon"])):y("",!0),p(v)&&e.$index!==p(V).length-1?(c(),g(k,{key:1,type:"primary",onClick:function(n){return p($)(e.$index)},icon:p(S)},null,8,["onClick","icon"])):y("",!0),s(k,{type:"danger",onClick:function(n){return p(E)(e.$index)},icon:p(F)},null,8,["onClick","icon"])]})),_:1})]})),_:1},8,["size","data"])),[[z,p(C)]]),s(k,{class:"add-more-btn",size:"default",icon:p(O),onClick:p(D)},{default:d((function(){return l[8]||(l[8]=[f("添加更多")])})),_:1,__:[8]},8,["icon","onClick"]),u("div",H,[s(k,{type:"primary",size:"default",icon:p(P),onClick:p(K)},{default:d((function(){return l[9]||(l[9]=[f("保存设置")])})),_:1,__:[9]},8,["icon","onClick"])])])}}};"function"==typeof E&&E(J),e("default",$(J,[["__scopeId","data-v-d3c0e0f4"]]))}}}));
