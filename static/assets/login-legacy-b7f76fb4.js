System.register(["./index-legacy-e574cec8.js","./form-item-legacy-de8da7e8.js","./button-legacy-f53896dd.js","./link-legacy-fb8bdfde.js","./checkbox-legacy-80a8805e.js","./tooltip-legacy-518b8698.js","./popper-legacy-ef8fd66b.js","./AutoIcon-legacy-c5d4e503.js","./image-viewer-legacy-2d4450b2.js","./input-legacy-bc871eba.js","./zfile-basic-legacy-50d0a649.js","./user-legacy-74f37583.js","./request-legacy-61b983ae.js","./install-legacy-ccb9f574.js","./path-legacy-63087d21.js","./_plugin-vue_export-helper-legacy-8fcf0e06.js","./KeyIcon-legacy-3346e3e2.js","./QuestionMarkCircleIcon-legacy-13cc9795.js","./CheckBadgeIcon-legacy-a01a5b9d.js","./index-legacy-1ae34dc2.js","./index-legacy-c317e588.js","./debounce-legacy-321ba92e.js","./scroll-legacy-68db505b.js","./_initCloneObject-legacy-b35b9836.js","./base-legacy-173045dc.js"],(function(e,n){"use strict";var a,l,t,i,o,r,u,s,c,d,f,m,g,p,v,x,b,h,_,y,w,j,k,z,C,V,I,U,E,M,q,A,B,Z,D,O,R,S,F,K,Q,G;return{setters:[function(e){a=e.b,l=e.g,t=e.x,i=e._,o=e.r,r=e.a3,u=e.ae,s=e.o,c=e.Z,d=e.k,f=e.w,m=e.f,g=e.e,p=e.l,v=e.F,x=e.G,b=e.a2,h=e.a0,_=e.i},null,function(e){y=e.E},function(e){w=e.E},null,null,null,function(e){j=e._},function(e){k=e.E},function(e){z=e.E,C=e.a},function(e){V=e._},function(e){I=e.c,U=e.l,E=e.a,M=e.b},function(e){q=e.f,A=e.E,B=e.b,Z=e.e},function(e){D=e.i,O=e.r},function(e){R=e.c},function(e){S=e._},function(e){F=e.r},function(e){K=e.r},function(e){Q=e.r},function(e){G=e.E},null,null,null,null,null],execute:function(){var n=document.createElement("style");function H(e,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function L(e,n){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}n.textContent=".zfile-login-logo[data-v-6bc717e7]{background-image:url(/assets/admin-login-3b853582.svg)}.zfile-login-form[data-v-6bc717e7]{--zfile-login-input-height: 45px}.zfile-login-form[data-v-6bc717e7] .el-form-item--large{margin-bottom:30px}.zfile-login-form[data-v-6bc717e7] .el-form-item--large:last-child{margin-bottom:0}.zfile-login-form[data-v-6bc717e7] .el-input__inner{height:var(--zfile-login-input-height)}.zfile-login-form[data-v-6bc717e7] .el-button--large{--el-button-size: var(--zfile-login-input-height);height:var(--el-button-size)}.zfile-login-form[data-v-6bc717e7] .el-input input{-webkit-box-shadow:0 0 0 1000px white inset;box-shadow:0 0 0 1000px #fff inset}\n",document.head.appendChild(n);var N={class:"h-full min-h-screen bg-gray-100 text-gray-900 flex justify-center items-center"},P={class:"h-full lg:h-auto max-w-screen-lg bg-white shadow-xl sm:rounded-xl flex flex-1"},W={class:"w-full lg:w-1/2 xl:w-1/2 mt-10 p-6 sm:p-12"},Y={class:"mt-0 flex flex-col items-center"},$={class:"w-full flex-1"},J={class:"flex space-x-5 w-full"},T={class:"flex w-full space-x-4 items-center justify-center"},X=["href"],ee={class:"flex justify-between w-full"};e("default",S({__name:"login",setup:function(e){var n=i(),S=o(!1),ne=r(),ae=u("zfile-login-storage",{remember:!1,username:"",password:""}),le=o(ae.value.remember),te=o(),ie=o({username:ae.value.username,password:ae.value.password,verifyCode:"",verifyCodeUUID:""}),oe=o({username:[{required:!0,message:"账号不能为空",trigger:["change","blur"]}],password:[{required:!0,message:"密码不能为空",trigger:["change","blur"]}]}),re=function(){te.value.validate((function(e){e?(S.value=!0,U(ie.value).then((function(e){var a=e.data.token,l=e.data.admin;le.value?(ae.value.username=ie.value.username,ae.value.password=ie.value.password,ae.value.remember=!0):(ae.value.username="",ae.value.password="",ae.value.remember=!1),window.localStorage.setItem("zfile-token",a),A({message:"登录成功",type:"success",duration:1e3,onClose:function(){if(l){var e=n.currentRoute.value.query.redirect;n.push(e||"/admin")}else n.push("/")}})})).catch((function(){S.value=!1,de()}))):A.warning("请输入账号密码!")}))},ue=o(""),se=function(){E(ie.value.username).then((function(e){var n=ue.value;ue.value=e.data,"image"!==n&&"image"===ue.value&&de()}))},ce=o({}),de=function(){M().then((function(e){ce.value=e.data,ie.value.verifyCodeUUID=e.data.uuid}))},fe=o([]);return s((function(){D().then((function(e){e.data||n.push("/install")})),I().then((function(e){var a=e.data.isLogin,l=e.data.isAdmin;a&&l&&n.push("/admin")})),q({url:"/api/sso/list",method:"get"}).then((function(e){fe.value=e.data})),se()})),function(e,n){var i=B,o=z,r=k,u=j,s=G,I=Z,U=w,E=y,M=C;return a(),l("div",N,[t("div",P,[n[12]||(n[12]=t("div",{class:"flex-1 bg-gray-50 text-center hidden lg:flex rounded-l-xl"},[t("div",{class:"m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat zfile-login-logo"})],-1)),t("div",W,[t("div",Y,[n[11]||(n[11]=t("a",{href:"https://github.com/zfile-dev/zfile",target:"_blank",class:"text-2xl mt-0 xl:text-3xl font-extrabold box animate__animated animate__fadeInDown"},[t("img",{class:"w-16 cursor-pointer",src:V})],-1)),t("div",$,[n[10]||(n[10]=c('<div class="my-12 relative" data-v-6bc717e7><div class="absolute inset-0 flex items-center" aria-hidden="true" data-v-6bc717e7><div class="w-full border-t text-gray-600" data-v-6bc717e7></div></div><div class="relative flex justify-center text-sm" data-v-6bc717e7><span class="px-2 bg-white text-sm leading-none text-gray-600 tracking-wide font-medium" data-v-6bc717e7> 登录 </span></div></div>',1)),d(M,{rules:m(oe),model:m(ie),ref_key:"loginFormRef",ref:te,class:"zfile-login-form",size:"large",onSubmit:n[6]||(n[6]=_((function(){}),["prevent"]))},{default:f((function(){return[d(o,{class:"box animate__animated animate__fadeInUp",prop:"username"},{default:f((function(){return[d(i,{placeholder:"账号","prefix-icon":m(O),modelValue:m(ie).username,"onUpdate:modelValue":n[0]||(n[0]=function(e){return m(ie).username=e}),modelModifiers:{trim:!0},onInput:se,onChange:se},null,8,["prefix-icon","modelValue"])]})),_:1}),d(o,{class:"box animate__animated animate__fadeInUp",prop:"password"},{default:f((function(){return[d(i,{placeholder:"密码",type:"password","show-password":"","prefix-icon":m(F),modelValue:m(ie).password,"onUpdate:modelValue":n[1]||(n[1]=function(e){return m(ie).password=e}),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]})),_:1}),"2fa"===m(ue)?(a(),g(o,{key:0,class:"box animate__animated animate__fadeInUp",prop:"verifyCode"},{default:f((function(){return[d(i,{placeholder:"双因素认证验证码","prefix-icon":m(H),modelValue:m(ie).verifyCode,"onUpdate:modelValue":n[2]||(n[2]=function(e){return m(ie).verifyCode=e}),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]})),_:1})):"image"===m(ue)?(a(),g(o,{key:1,class:"box animate__animated animate__fadeInUp",prop:"verifyCode"},{default:f((function(){var e;return[t("div",J,[d(i,{class:"flex-1",placeholder:"请输入验证码","prefix-icon":m(L),modelValue:m(ie).verifyCode,"onUpdate:modelValue":n[3]||(n[3]=function(e){return m(ie).verifyCode=e}),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"]),d(r,{src:null===(e=m(ce))||void 0===e?void 0:e.imgBase64,onClick:n[4]||(n[4]=function(e){return de()})},null,8,["src"])])]})),_:1})):p("",!0),d(o,{class:"!mb-0"},{default:f((function(){return[t("div",T,[(a(!0),l(v,null,x(m(fe),(function(e){return a(),l("a",{key:e.provider,class:"cursor-pointer inline",href:m(R)(m(ne).serverAddress,"sso",e.provider,"login")},[d(s,{content:e.name},{default:f((function(){return[d(u,{class:"inline",icon:e.icon},null,8,["icon"])]})),_:2},1032,["content"])],8,X)})),128))])]})),_:1}),d(o,{class:"box animate__animated animate__fadeInUp"},{default:f((function(){return[t("div",ee,[d(I,{modelValue:m(le),"onUpdate:modelValue":n[5]||(n[5]=function(e){return b(le)?le.value=e:null}),label:"记住密码"},null,8,["modelValue"]),d(s,{class:"item",effect:"dark",placement:"left"},{content:f((function(){return n[7]||(n[7]=[t("div",null,[h(" 将配置文件 application.properties 中 zfile.debug 修改为 true, 重启后访问首页即可重置密码 "),t("br"),t("a",{target:"_blank",class:"text-blue-400",href:"https://docs.zfile.vip/config/config-debug"}," 点击可前往文档查看操作方式 ")],-1)])})),default:f((function(){return[d(U,{icon:m(K),underline:!1},{default:f((function(){return n[8]||(n[8]=[h("忘记密码")])})),_:1,__:[8]},8,["icon"])]})),_:1})])]})),_:1}),d(o,null,{default:f((function(){return[d(E,{loading:m(S),autofocus:"",class:"w-full mb-0","native-type":"submit",type:"primary",icon:m(Q),onClick:re},{default:f((function(){return n[9]||(n[9]=[h(" 登录 ")])})),_:1,__:[9]},8,["loading","icon"])]})),_:1})]})),_:1},8,["rules","model"])])])])])])}}},[["__scopeId","data-v-6bc717e7"]]))}}}));
