import{a4 as F,r as c,a3 as C,b as N,e as w,w as n,k as s,a0 as y,f as o,i as D,x as R,a2 as z}from"./index-008199ed.js";import{E as I}from"./dialog-9877e468.js";import"./overlay-64b24548.js";import{E as P}from"./button-30635c71.js";/* empty css                  */import{E as S,a as q}from"./input-73d413ba.js";import{c as B,a as M}from"./admin-user-8224dae0.js";import{E as j,b as L}from"./request-7014ab81.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const i=F({toUsername:"",toNickname:"",toPassword:"",fromId:null}),T={toUsername:[{required:!0,message:"请输入新用户名"},{min:1,max:255,message:"长度应在 1 到 255 个字符",trigger:"blur"},{validator:(f,r,l)=>{if(r==null||r===""){l();return}B({username:r}).then(m=>{m.data?l(new Error("该用户名已存在，请修改。")):l()})}}],toNickname:[{required:!0,message:"请输入新用户昵称",trigger:"blur"}]},u=c(!1),d=c(!1);function $(){const f=t=>{u.value=!0,i.fromId=t.id,i.toUsername=t.username,i.toNickname=t.nickname},r=()=>{u.value=!1},l=c(null);return{dialogVisible:u,openDialog:f,closeDialog:r,formData:i,rules:T,userCopyFormRef:l,submitForm:t=>{d.value=!0,l.value.validate(p=>{p?M(i).then(v=>{j.success("复制成功"),u.value=!1,t("close")}).finally(()=>{d.value=!1}):d.value=!1})},saveLoading:d}}const G={__name:"index",setup(f,{emit:r}){const{dialogVisible:l,saveLoading:m,formData:t,rules:p,userCopyFormRef:v,submitForm:U}=$(),x=r,_=C();return(A,e)=>{const g=L,b=S,k=q,V=P,E=I;return N(),w(E,{"append-to-body":"",title:"复制用户及权限",modelValue:o(l),"onUpdate:modelValue":e[6]||(e[6]=a=>z(l)?l.value=a:null)},{footer:n(()=>[s(V,{onClick:e[4]||(e[4]=a=>l.value=!1)},{default:n(()=>e[8]||(e[8]=[y("取 消")])),_:1,__:[8]}),s(V,{type:"primary",onClick:e[5]||(e[5]=a=>o(U)(x)),loading:o(m)},{default:n(()=>e[9]||(e[9]=[y("确 定")])),_:1,__:[9]},8,["loading"])]),default:n(()=>[s(k,{onSubmit:e[3]||(e[3]=D(()=>{},["prevent"])),model:o(t),rules:o(p),"label-width":o(_).adminForm.labelWidth,"label-position":o(_).adminForm.labelPosition,size:o(_).adminForm.size,"status-icon":"",class:"z-admin-form",ref_key:"userCopyFormRef",ref:v},{default:n(()=>[s(b,{label:"新用户名称",prop:"toUsername"},{default:n(()=>[s(g,{modelValue:o(t).toUsername,"onUpdate:modelValue":e[0]||(e[0]=a=>o(t).toUsername=a),placeholder:"请输入新用户名称"},null,8,["modelValue"])]),_:1}),s(b,{label:"新用户昵称",prop:"toNickname"},{default:n(()=>[s(g,{modelValue:o(t).toNickname,"onUpdate:modelValue":e[1]||(e[1]=a=>o(t).toNickname=a),placeholder:"请输入新用户昵称"},null,8,["modelValue"])]),_:1}),s(b,{label:"新用户密码"},{default:n(()=>[s(g,{modelValue:o(t).toPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>o(t).toPassword=a),placeholder:"请输入新用户密码"},null,8,["modelValue"]),e[7]||(e[7]=R("div",{class:"text-xs text-gray-400"}," 如不填写，则从源用户复制密码 ",-1))]),_:1,__:[7]})]),_:1},8,["model","rules","label-width","label-position","size"])]),_:1},8,["modelValue"])}}},W=O(G,[["__scopeId","data-v-ef5c5542"]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as U,oe as i,$ as u};
